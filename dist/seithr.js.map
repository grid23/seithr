{"version":3,"sources":["webpack://seithr/webpack/bootstrap","webpack://seithr/./lib/decorators/bound.js","webpack://seithr/./lib/decorators/final.js","webpack://seithr/./lib/decorators/frozen.js","webpack://seithr/./lib/decorators/index.js","webpack://seithr/./lib/store.js","webpack://seithr/./lib/utils/cancelAnimationFrames.js","webpack://seithr/./lib/errors.js","webpack://seithr/./lib/events/Event.js","webpack://seithr/./lib/models/ModelChange.js","webpack://seithr/./lib/env.js","webpack://seithr/./lib/utils/dummy.js","webpack://seithr/./lib/events/EventDispatcher.js","webpack://seithr/./lib/events/EventTarget.js","webpack://seithr/./lib/utils/isNative.js","webpack://seithr/./lib/utils/toType.js","webpack://seithr/./lib/uids/UID.js","webpack://seithr/./lib/nodes/Node.js","webpack://seithr/./lib/models/Model.js","webpack://seithr/./lib/cookies/Cookie.js","webpack://seithr/./lib/css/CSSHook.js","webpack://seithr/./lib/serializers/Serializer.js","webpack://seithr/./lib/css/CSSRule.js","webpack://seithr/./lib/css/CSSConditionalRule.js","webpack://seithr/./lib/css/CSSMediaRule.js","webpack://seithr/./lib/utils/domready.js","webpack://seithr/./lib/utils/isSameDomain.js","webpack://seithr/./lib/utils/ReadyStateFul.js","webpack://seithr/./lib/utils/requestAnimationFrames.js","webpack://seithr/./lib/routing/Route.mjs","webpack://seithr/./lib/routing/RouteDispatcher.mjs","webpack://seithr/./lib/routing/Router.mjs","webpack://seithr/./lib/utils/singleton.js","webpack://seithr/./lib/views/View.js","webpack://seithr/./lib/views/ZParser.js","webpack://seithr/./lib/css/Stylesheet.js","webpack://seithr/./lib/utils/trait.js","webpack://seithr/./lib/graph/Vertex.js","webpack://seithr/./lib/graph/Edge.js","webpack://seithr/./lib/graph/DepthFirstTree.js","webpack://seithr/./lib/graph/Traversal.js","webpack://seithr/./lib/graph/Graph.js","webpack://seithr/./lib/graph/BreadthFirstTree.js","webpack://seithr/./lib/graph/HyperGraph.js","webpack://seithr/./lib/index.js"],"names":["kind","key","placement","descriptor","value","extras","undefined","initializer","get","configurable","frozen","deep","enumerable","writable","Object","freeze","args","WeakMap","generatorFn","store","has","set","ERR_EVENT_NOT_IMPLEMENTED","ERR_EVENT_TARGET_IS_NOT_VALID","ERR_CANNOT_BE_REUSED","ERR_CSSTEXT","ERR_FN_EXPECTED","ERR_GENERATOR_EXPECTED","ERR_INVALID_TARGET","ERR_NODE_NOT_CHILD","ERR_NODE_NOT_IMPLEMENTED","ERR_READYSTATEFUL_NOT_IMPLEMENTED","ERR_SAME_OBJ","ERR_ILLEGAL_CONSTRUCTOR","ERR_INVALID_DATA","ERR_TYPE_UNKNOWN","ERR_NOT_ITERABLE","ERR_NOT_A_NODE","ERR_RHANDLER","ERR_ROUTE_BUSY","ERR_NOTROUTE","ERR_SS_NOT_WRITABLE","ERR_STRING_EXPECTED","WARN_LATE_NEXT","EALRDYCONN","EINVALIDCONS","ENOTEDGE","ENOTGRAPH","ENOTINSET","ENOTVERTEX","EPRLLLNOTALLOW","ETOOMANYVERT","EUNCOMPEDGE","EUNKNWNREL","sdetail","Symbol","sevent","sondom","soriginaltarget","sphase","Event","constructor","type","bubbles","cancelable","composed","detail","event","document","createEvent","initEvent","seal","final","window","NONE","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","originalEvent","domnode","currentTarget","dompath","deepPath","map","node","defaultPrevented","eventPhase","originalTarget","relatedTarget","target","preventDefault","stopPropagation","stopImmediatePropagation","ModelChange","TYPE","path","spath","toString","join","BUBBLES","a","createElement","b","appendChild","addEventListener","e","dispatchEvent","EventDispatcher","targets","dispatch","broadcast","Error","srelatedtarget","Node","root","rootNode","sdummy","head","contains","r_value","BROADCAST_PHASE","sbroadcastChannel","dummy","EventTarget","addBroadcastListener","nhandler","handler","slice","broadcastEvent","from","removeBroadcastListener","removeEventListener","known_exceptions","rnative","fn","match","indexOf","o","Array","isArray","ntype","native","next","prototype","Map","Set","WeakSet","Reflect","apply","toLowerCase","def_chars","def_map","def_radix","def_regexp","schars","smap","sradix","sregexp","UID","chars","CHARS","MAP","radix","RADIX","regexp","REGEXP","generate","replace","c","r","Date","now","Math","random","snodename","snodetype","snodevalue","stextnode","suid","registerIDX","name","OBJECT_NODE","nodeValue","leastCommonAncestor","iterable","iterator","TypeError","nodes","every","size","paths","forEach","push","parentNode","last","candidates","pop","filter","v","defineProperty","domchildren","childNodes","firstChild","lastChild","nextSibling","setAttribute","typeOf","removeAttribute","previousSibling","getRootNode","domsiblings","siblings","uid","parent","child","comparePosition","top","hasChildNodes","referenceNode","referenceChild","insertBefore","removeChild","replaceChild","sdata","soverflow","sseal","sstrictseal","ssymbol","starget","sproxy","dispatchUpdate","model","xref","proxies","revocable","noop","strictlySealed","revocableMeta","opts","traps","hasOwnProperty","revoke","proxy","Proxy","create","setTimeout","revocableProxy","hook","overflow","candidate","io","curr","defineProperties","toJSON","silent","sealed","delete","Model","ref","for","unmask","strictseal","valueOf","fetch","m","meta","silentio","bool","strict","JSON","parse","stringify","keyFor","change","modelchange","sdomain","sexpires","sfrombrowser","sname","ssession","LIFESPAN","TOP_DOMAIN","cookiestr","cookie","domain","toUTCString","split","location","hostname","i","length","hit","Sync","from_browser","source","Cookie","expires","maxAge","session","isNaN","sync","events","navigator","cookieEnabled","COOKIE_ENABLED","exists","data","unescape","console","error","string","escape","hookedprops","defaulthandler","property","CSSHook","getHook","transform","bind","propertyHandler","prophandler","sproperty","sprophandler","def_delimiter","def_separator","def_key_separator","rspacetoplus","rplustospace","sdelimiter","sseparator","Serializer","objectify","object","del","delimiter","sep","separator","search","pair","idx","decodeURIComponent","trim","serialize","keys","encodeURIComponent","scssrule","sselectortext","CSSRuleEvent","cssRule","to","Reset","TextUpdate","SelectorUpdate","rcssparse","serializer","CSSRule","objectifyCssText","serializeCssText","fromstr","shift","exec","cssText","style","props","k","setProperty","selectorText","getProperty","CSSStyleDeclaration","getPropertyValue","prop","reset","textupdate","rconditional","updaters_text","sactive","sadd","satsheet","sbasecsstext","sbufferrules","sconditiontext","sremove","srules","ssync","stype","CSSConditionalRule","condition","atrule","conditionText","rule","insertRule","splice","deleteRule","rules","is_rule","is_conditional","cond_rule","buffer_rules","cssRules","idxs","CSSMediaRule","gather","documentElement","title","getElementsByTagName","viewport","querySelector","body","ready","Promise","resolve","onready","isready","readyState","href","sfrom","sreadystate","sto","ReadyStateChange","ReadyStateFul","UNINITIALIZED","readyStateChange","rsf","readystatechange","generator","onframe","done","requestAnimationFrame","Class","Singleton","singleton","getOwnPropertyNames","getOwnPropertySymbols","staticProperty","getOwnPropertyDescriptor","sargs","sconstructor","sexpression","sfragment","sprops","ssubviewAsChild","stemplate","supdates","xmap","revocableNodeProxy","view","all","revocablePropProxy","transformPath","reduce","acc","step","parseFloat","expression","parts","values","current","View","isPrototypeOf","expressWith","x","xw","conf","subviewAsChild","Parser","template","updates","updaters","updater","add","handlers","fragment","refs","auto_vars","CLASS_LIST_COMPAT","Element","HTMLElement","createElementNS","classList","evaluate","String","parseInt","setAttributeExceptions","namespaces","html","svg","xml","xmlns","xlink","sbuffer","scontext","slength","sowner","spile","spointer","srefs","svars","rextractsvars","rpathmodel","extractVars","input","output","Function","operators","captured","buffer","capture","lookAhead","traversals","pile","nodeType","ELEMENT_NODE","attr","ns","update","setAttributeNS","bracket","was","requested","remove","classname","getAttribute","concat","safe","TEXT_NODE","createTextNode","textNodes","warn","onnode","textContent","position","innerHTML","remains","ignore","debug","log","symbol","Constructor","instance","context","owner","any","pointer","glyph","int","uint","vars","operate","operator","createDocumentFragment","unpile","nodeName","snode","sready","ssheet","swritable","Ready","sheet","Stylesheet","isLocalFile","isSameDomain","dict","id","includes","ZParser","media","domready","then","hrt","disabled","call","reject","onload","msSetImmediate","sparents","classes","prototypes","accumulator","getPrototypeOf","unshift","slabel","Vertex","label","sedges","sgraphs","graphs","slbabel","addEdge","graph","edge","Graph","addEdges","edges","adjacents","adjacentsIn","adjacentsOut","arcFrom","vertex","arcs","vertices","arcTo","connections","degree","extravertArcWith","hyperEdges","hyperarcs","hyperEdgeWith","indegree","introvertArcWith","Edge","lines","lineWith","loop","relation","loops","outdegree","removeEdge","removeEdges","sdirection","sextraverted","sgraph","srelation","svertexa","svertexb","svertices","relations","LINE","INOUT","ININ","OUTIN","OUTOUT","REGION","HYPERARC","states","CONNECTED","DISCONNECTED","types","ARC","LOOP","otherVertices","addVertex","addVertices","bidirected","Boolean","directed","extraverted","in","inward","intraverted","out","outward","rel","ReferenceError","state","undirected","l","removeVertex","removeVertices","sroot","straversal","DepthFirstTree","rootVertex","traversal","dft","setPrototypeOf","hasPathTo","Traversal","bft","breadthFirstTree","depthFirstTree","stack","nextVertex","queue","sort","BreadthFirstTree","sallowed","allowance","PARALLELS","presets","LINES","UNDIRECTED","ARCS","DIRECTED","CONNECTIONS","ALL","allows","allowed","regions","some","construct","added","pathTo","HyperGraph","process"],"mappings":"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","file":"seithr.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\"use strict\"\r\n\r\nexport default ({ kind, key, placement, descriptor }) => {\r\n    if ( kind !== \"method\")\r\n      return { kind, key, placement, descriptor }\r\n\r\n    if ( descriptor.value)\r\n      return {\r\n          kind, key, placement, descriptor\r\n        , extras: [{\r\n              kind:\"field\", key, placement: \"own\",  descriptor: { ...descriptor, value: undefined }\r\n            , initializer(){ return this::descriptor.value }\r\n          }]\r\n      }\r\n    else if ( descriptor.get )\r\n      return {\r\n          kind, key, placement, descriptor: {\r\n              ...descriptor\r\n            , get(){ return this::descriptor.get() }\r\n          }\r\n      }\r\n}\r\n","\"use strict\"\r\n\r\nexport default ({kind, key, placement, descriptor}) => {\r\n    return {\r\n        kind, key, placement, descriptor:{ ...descriptor, configurable:false }\r\n    }\r\n}\r\n","\"use strict\"\r\n\r\nconst frozen = (deep, { descriptor, key, kind, placement, initializer }) => {\r\n    if ( kind !== \"field\" )\r\n      return { descriptor, key, kind, placement, initializer }\r\n\r\n    //TODO deep support :D\r\n    return {\r\n        key, kind, placement\r\n      , descriptor:{ configurable: false, enumerable:descriptor.enumerable, writable: false }\r\n      , initializer: function(){\r\n            return () => Object.freeze(initializer())\r\n        }()\r\n    }\r\n}\r\n\r\nexport default (...args) => {\r\n    if ( typeof args[0] === \"boolean\" )\r\n      return (...args) => frozen(true, ...args)\r\n    else\r\n      return frozen(false, ...args)\r\n}\r\n","\"use strict\"\r\n\r\nexport bound from \"./bound\"\r\nexport final from \"./final\"\r\nexport frozen from \"./frozen\"\r\n","\"use strict\"\r\n\r\nexport default new WeakMap\r\n","\"use strict\"\n\nimport store from \"store\"\n\nexport default (generatorFn) => {\n    if ( store.has(generatorFn) )\n      store.set(generatorFn, false)\n}\n","\"use strict\"\r\n\r\nexport const ERR_EVENT_NOT_IMPLEMENTED = \"ERR_EVENT_NOT_IMPLEMENTED\"\r\nexport const ERR_EVENT_TARGET_IS_NOT_VALID = \"ERR_EVENT_TARGET_IS_NOT_VALID\"\r\nexport const ERR_CANNOT_BE_REUSED = \"ERR_CANNOT_BE_REUSED\"\r\nexport const ERR_CSSTEXT = \"ERR_CSSTEXT\"\r\nexport const ERR_FN_EXPECTED = \"function expected\"\r\nexport const ERR_GENERATOR_EXPECTED = \"ERR_GENERATOR_EXPECTED\"\r\nexport const ERR_INVALID_TARGET = \"ERR_INVALID_TARGET\"\r\nexport const ERR_NODE_NOT_CHILD = \"ERR_NODE_NOT_CHILD\"\r\nexport const ERR_NODE_NOT_IMPLEMENTED = \"ERR_NODE_NOT_IMPLEMENTED\"\r\nexport const ERR_READYSTATEFUL_NOT_IMPLEMENTED = \"ERR_READYSTATEFUL_NOT_IMPLEMENTED\"\r\nexport const ERR_SAME_OBJ = \"ERR_SAME_OBJ\"\r\nexport const ERR_ILLEGAL_CONSTRUCTOR = \"ERR_ILLEGAL_CONSTRUCTOR\"\r\nexport const ERR_INVALID_DATA = \"ERR_INVALID_DATA\"\r\nexport const ERR_TYPE_UNKNOWN = \"ERR_TYPE_UNKNOWN\"\r\nexport const ERR_NOT_ITERABLE = \"ERR_NOT_ITERABLE\"\r\nexport const ERR_NOT_A_NODE = \"ERR_NOT_A_NODE\"\r\nexport const ERR_RHANDLER = \"not a valid route handler\"\r\nexport const ERR_ROUTE_BUSY = \"route has already been used\"\r\nexport const ERR_NOTROUTE = \"not a valid route object\"\r\nexport const ERR_SS_NOT_WRITABLE = \"ERR_SS_NOT_WRITABLE\"\r\nexport const ERR_STRING_EXPECTED = \"ERR_STRING_EXPECTED\"\r\nexport const WARN_LATE_NEXT = \"WARN_LATE_NEXT\"\r\n\r\n// graph\r\nexport const EALRDYCONN = \"edge is already connected to a graph\"\r\nexport const EINVALIDCONS = \"invalid constructor\"\r\nexport const ENOTEDGE = \"object does not implement Edge\"\r\nexport const ENOTGRAPH = \"object does not implement Graph\"\r\nexport const ENOTINSET = \"object does not belong to the set\"\r\nexport const ENOTVERTEX = \"object does not implement Vertex\"\r\nexport const EPRLLLNOTALLOW = \"graph doesn't allow parallel edges\"\r\nexport const ETOOMANYVERT = \"edges cannot hold more vertices\"\r\nexport const EUNCOMPEDGE = \"edge type is not allowed by this graph\"\r\nexport const EUNKNWNREL = \"relation is unknown\"\r\n","\"use strict\"\r\n\r\nimport { final } from \"decorators\"\r\nimport { ERR_EVENT_NOT_IMPLEMENTED } from \"errors\"\r\nimport store from \"store\"\r\n\r\nexport const sdetail = new Object(Symbol(\"detail\"))\r\nexport const sevent = new Object(Symbol(\"\"))\r\nexport const sondom = new Object(Symbol())\r\nexport const soriginaltarget = new Object(Symbol())\r\nexport const sphase = new Object(Symbol())\r\n\r\nexport default class Event {\r\n    // static from(event){\r\n    //     if ( !(event instanceof Event) && !(event instanceof window.Event) )\r\n    //       throw new Error(ERR_EVENT_NOT_IMPLEMENTED)\r\n    //\r\n    //     const From = event.constructor\r\n    //     const to = new From(event.type, event)\r\n    //     Object.setPrototypeOf(to, Event.prototype)\r\n    //     Object.keys(From.prototype)\r\n    //     .forEach(property => {\r\n    //         if ( Event.prototype.hasOwnProperty(property) )\r\n    //           return\r\n    //         Object.defineProperty(to, property, Object.getOwnPropertyDescriptor(From.prototype, property))\r\n    //     })\r\n    //\r\n    //     store.set(to, new WeakMap)\r\n    //     store.get(to).set(sdetail, Object.seal(event.detail||null))\r\n    //\r\n    //     if ( event.target ) store.get(to).set(soriginaltarget, event.target)\r\n    //     return to\r\n    // }\r\n\r\n    @final\r\n    static get NONE(){ return window.Event.NONE }\r\n    @final\r\n    static get CAPTURING_PHASE(){ return window.Event.CAPTURING_PHASE }\r\n    @final\r\n    static get AT_TARGET(){ return window.Event.AT_TARGET  }\r\n    @final\r\n    static get BUBBLING_PHASE(){ return window.Event.BUBBLING_PHASE }\r\n    @final\r\n    static get BROADCAST_PHASE(){ return window.Event.BUBBLING_PHASE + 1 }\r\n\r\n    constructor(type, { bubbles=true, cancelable=true, composed=false, detail=null }={}){\r\n        const event = document.createEvent(\"Event\")\r\n        event.initEvent(type, bubbles, cancelable)\r\n\r\n        store.set(this, new WeakMap)\r\n        store.get(this).set(sdetail, Object.seal(detail))\r\n        store.get(this).set(sevent, event)\r\n        store.set(event, this) // x-reference\r\n    }\r\n\r\n    @final\r\n    get originalEvent(){ return store.get(this).get(sevent) }\r\n\r\n    @final\r\n    get bubbles(){ return this.originalEvent.bubbles }\r\n\r\n    @final\r\n    get cancelable(){ return this.originalEvent.cancelable }\r\n\r\n    @final\r\n    get currentTarget(){\r\n        const domnode = this.originalEvent.currentTarget\r\n        return store.get(this).get(sondom) ? store.get(domnode) : domnode\r\n    }\r\n\r\n    @final\r\n    get deepPath(){\r\n        const dompath = this.originalEvent.deepPath\r\n        return !dompath ? dompath\r\n               : store.get(this).get(sondom) ? dompath.map(node => store.get(node))\r\n               : dompath\r\n    }\r\n\r\n    @final\r\n    get defaultPrevented(){  return this.originalEvent.defaultPrevented }\r\n\r\n    @final\r\n    get detail(){ return store.get(this).get(sdetail) || (this.originalEvent.detail?this.originalEvent.detail:null) }\r\n\r\n    @final\r\n    get eventPhase(){ return store.get(this).get(sphase) || this.originalEvent.eventPhase }\r\n\r\n    @final\r\n    get explicitOriginalTarget(){ return this.originalTarget }\r\n\r\n    @final\r\n    get originalTarget(){\r\n        const domnode = this.originalEvent.originalTarget\r\n        return store.get(this).has(soriginaltarget) ? store.get(this).get(soriginaltarget)\r\n               : store.get(this).get(sondom) ? store.get(domnode)\r\n               : domnode\r\n    }\r\n\r\n    @final\r\n    get relatedTarget(){\r\n      const domnode = this.originalEvent.relatedTarget\r\n      return store.get(this).get(sondom) ? store.get(domnode) : domnode\r\n    }\r\n\r\n    @final\r\n    get target(){\r\n        const domnode = this.originalEvent.target\r\n        return store.get(this).get(sondom) ? store.get(domnode) : domnode\r\n    }\r\n\r\n    @final\r\n    get type(){ return this.originalEvent.type }\r\n\r\n    @final\r\n    preventDefault() { return this.originalEvent.preventDefault() }\r\n\r\n    @final\r\n    stop() { return this.originalEvent.stopPropagation() }\r\n\r\n    @final\r\n    stopImmediate() { return this.originalEvent.stopImmediatePropagation() }\r\n}\r\n","\"use strict\"\r\n\r\nimport Event from \"events/Event\"\r\nimport spath from \"models/Model\"\r\nimport store from \"store\"\r\n\r\nexport default class ModelChange extends Event {\r\n    static get TYPE(){ return \"model:change\" }\r\n\r\n    constructor(path){\r\n        super(ModelChange.TYPE, { bubbles: false })\r\n        store.get(this).set(spath, path)\r\n    }\r\n\r\n    get path(){ return store.get(this).get(spath) }\r\n    get toString(){ return this.path.join(\".\") }\r\n}\r\n","\"use strict\"\r\n\r\nexport const BUBBLES = (() => {\r\n    let bubbles = false\r\n    const a = document.createElement(\"div\")\r\n    const b = a.appendChild(document.createElement(\"div\"))\r\n    a.addEventListener(\"bubblestest\", e => bubbles=true)\r\n\r\n    const e = document.createEvent(\"Event\")\r\n    e.initEvent(\"bubblestest\", true, true)\r\n    b.dispatchEvent(e)\r\n\r\n    return bubbles\r\n})()\r\n","\"use strict\"\r\n\r\nexport default () => document.createElement(\"div\")\r\n","\"use strict\"\r\n\r\nimport { BUBBLES } from \"env\"\r\nimport { final } from \"decorators\"\r\n\r\nimport { ERR_EVENT_NOT_IMPLEMENTED, ERR_EVENT_TARGET_IS_NOT_VALID } from \"errors\"\r\nimport Event from \"events/Event\"\r\nimport store from \"store\"\r\nimport { sbroadcastChannel, sdummy } from \"events/EventTarget\"\r\nimport { sevent, sondom, sphase, soriginaltarget } from 'events/Event'\r\n\r\nexport default class EventDispatcher {\r\n    @final\r\n    static get BUBBLES(){ return BUBBLES }\r\n\r\n    constructor(){\r\n        store.set(this, new WeakMap)\r\n    }\r\n\r\n    @final\r\n    broadcast(event, targets){\r\n        return this.dispatch(event, targets, true)\r\n    }\r\n\r\n    @final\r\n    dispatch(event, {target, relatedTarget, originalTarget}={}, broadcast=false){\r\n        if ( (!(event instanceof Event) && !(event instanceof window.Event)) || !store.has(event) )\r\n          throw new Error(ERR_EVENT_NOT_IMPLEMENTED)\r\n\r\n        relatedTarget && store.get(event).set(srelatedtarget, relatedTarget)\r\n        originalTarget && store.get(event).set(soriginaltarget, originalTarget || target)\r\n\r\n        if ( target instanceof window.Node ) {\r\n            store.get(event).set(sondom, false)\r\n            return target.dispatchEvent(store.get(event).get(event.originalEvent))\r\n        }\r\n\r\n        if ( !store.has(target) )\r\n          throw new Error(ERR_EVENT_TARGET_IS_NOT_VALID)\r\n\r\n        store.get(event).set(sondom, true)\r\n\r\n        if ( !BUBBLES ) {\r\n            const root = store.get(store.get(target).rootNode).get(sdummy)\r\n\r\n            if ( !document.head.contains(root) )\r\n              document.head.appendChild(root)\r\n        }\r\n        const r_value = store.get(target).get(sdummy).dispatchEvent(event.originalEvent)\r\n\r\n        if ( r_value && broadcast ) {\r\n            store.get(event).set(sphase, Event.BROADCAST_PHASE)\r\n            store.get(sbroadcastChannel).dispatchEvent(event.originalEvent)\r\n        }\r\n        \r\n        return r_value\r\n    }\r\n}\r\n","\"use strict\"\r\n\r\nimport { BUBBLES } from \"env\"\r\nimport dummy from \"utils/dummy\"\r\nimport Event from \"events/Event\"\r\nimport EventDispatcher from \"events/EventDispatcher\"\r\nimport { final, frozen } from \"decorators\"\r\nimport store from \"store\"\r\n\r\nexport const sbroadcastChannel = new Object(Symbol(\"broadcastchannel\"))\r\nexport const sdummy = new Object(Symbol(\"dummy\"))\r\n\r\nstore.set(sbroadcastChannel, dummy())\r\n\r\nexport default class EventTarget {\r\n    constructor(){\r\n        store.set(this, new WeakMap)\r\n        store.get(this).set(sdummy, dummy())\r\n        store.set(store.get(this).get(sdummy), this) //cross-reference\r\n    }\r\n\r\n    addBroadcastListener(...args){\r\n        const nhandler = args[1]\r\n        const handler = function(e){\r\n            if ( store.has(e) )\r\n              e = store.get(e)\r\n            return nhandler(e)\r\n        }\r\n\r\n        store.set(args[1], handler)\r\n        return store.get(sbroadcastChannel).addEventListener(args[0], handler, ...args.slice(2))\r\n    }\r\n    addEventListener(...args){\r\n        const nhandler = args[1]\r\n        const handler = function(e){\r\n            if ( store.has(e) )\r\n              e = store.get(e)\r\n            return nhandler(e)\r\n        }\r\n\r\n        store.set(args[1], handler)\r\n        return store.get(this).get(sdummy).addEventListener(args[0], handler, ...args.slice(2))\r\n    }\r\n\r\n    broadcastEvent(event, { relatedTarget, originalTarget }={}){\r\n        return this.dispatchEvent(event, { target: store.get(sbroadcastChannel), relatedTarget, originalTarget:this }, true)\r\n    }\r\n    dispatchEvent(event, { relatedTarget, originalTarget } = {}, broadcast=false){\r\n        if ( (event && event.eventPhase > Event.NONE) || (event instanceof window.Event && !(event instanceof Event)) )\r\n          event = Event.from(event)\r\n\r\n        return new EventDispatcher().dispatch(event, {\r\n            target: this, relatedTarget, originalTarget\r\n        }, broadcast)\r\n    }\r\n\r\n    removeBroadcastListener(...args){\r\n        const nhandler = args[1]\r\n        const handler = store.get(nhandler)\r\n\r\n        return store.get(sbroadcastChannel).removeEventListener(args[0], handler, ...args.slice(2))\r\n    }\r\n    removeEventListener(...args){\r\n        const nhandler = args[1]\r\n        const handler = store.get(nhandler)\r\n\r\n        return store.get(this).get(sdummy).removeEventListener(args[0], handler, ...args.slice(2))\r\n    }\r\n}\r\n","\"use strict\"\r\n\r\nconst known_exceptions = [\"[object CSSMediaRule]\"]\r\nconst rnative = /\\s*\\[native code\\]\\s*/i\r\n\r\nexport default fn => {\r\n    try {\r\n        const toString = fn.toString() || \"\"\r\n        return typeof fn == \"function\" ? !!toString.match(rnative)\r\n             : known_exceptions.indexOf(toString) > -1 ? true\r\n             : false\r\n    } catch(e){\r\n        return null\r\n    }\r\n}\r\n","\"use strict\"\r\n\r\nimport native from \"utils/isNative\"\r\n\r\nexport default o => {\r\n    if ( Array.isArray(o) )\r\n      return \"array\"\r\n\r\n    const ntype = typeof o\r\n    return ntype !== \"object\" ? ( o === o ? ntype : \"nan\" )\r\n      : o && o.constructor && native(o.next) ? \"generator\"\r\n      : o && o.constructor && !native(o.constructor) ? \"instance\"\r\n      : o && typeof o.prototype == \"function\" ? \"function\"\r\n      : o && typeof o.constructor == Map ? \"map\"\r\n      : o && typeof o.constructor == WeakMap ? \"weakmap\"\r\n      : o && typeof o.constructor == Set ? \"set\"\r\n      : o && typeof o.constructor == WeakSet ? \"weakset\"\r\n      : Reflect.apply(Object.prototype.toString, o, []).slice(8, - 1).toLowerCase()\r\n}\r\n","\"use strict\"\r\n\r\nimport { final } from \"decorators\"\r\nimport store from \"store\"\r\n\r\nconst def_chars = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\"\r\nconst def_map = \"Fxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\"\r\nconst def_radix = 16\r\nconst def_regexp = /[xy]/g\r\n\r\nconst schars = new Object(Symbol())\r\nconst smap = new Object(Symbol())\r\nconst sradix = new Object(Symbol())\r\nconst sregexp = new Object(Symbol())\r\n\r\nexport default class UID {\r\n    @final\r\n    static get CHARS(){ return def_chars }\r\n\r\n    @final\r\n    static get MAP(){ return def_map }\r\n\r\n    @final\r\n    static get RADIX(){ return def_radix }\r\n\r\n    @final\r\n    static get REGEXP(){ return def_regexp }\r\n\r\n    @final\r\n    static uid({ chars=UID.CHARS, map=UID.MAP, radix=UID.RADIX, regexp=UID.REGEXP } = {}){ return new UID({ chars, map, radix, regexp }).generate() }\r\n\r\n    constructor({ chars=UID.CHARS, map=UID.MAP, radix=UID.RADIX, regexp=UID.REGEXP } = {}){\r\n        store.set(this, new WeakMap)\r\n        store.get(this).set(schars, chars)\r\n        store.get(this).set(smap, map)\r\n        store.get(this).set(sradix, radix)\r\n        store.get(this).set(sregexp, regexp)\r\n    }\r\n\r\n    @final\r\n    get chars(){ return store.get(this).get(schars) }\r\n\r\n    @final\r\n    get map(){ return store.get(this).get(smap) }\r\n\r\n    @final\r\n    get radix(){ return store.get(this).get(sradix) }\r\n\r\n    @final\r\n    get regexp(){ return store.get(this).get(sregexp) }\r\n\r\n    @final\r\n    generate(){\r\n        return this.map.replace(this.regexp, (c, r) => {\r\n            r = (Date.now() + Math.random()*this.radix)%this.radix |0\r\n            if ( c === \"y\") r = (r & 0x3)|0x8\r\n            return this.chars[r]\r\n        })\r\n    }\r\n}\r\n","\"use strict\"\r\n\r\nimport { final } from \"decorators\"\r\nimport { ERR_NODE_NOT_CHILD, ERR_NODE_NOT_IMPLEMENTED, ERR_NOT_A_NODE, ERR_NOT_ITERABLE, ERR_SAME_OBJ, ERR_STRING_EXPECTED } from \"errors\"\r\nimport EventTarget, { sdummy } from \"events/EventTarget\"\r\nimport store from \"store\"\r\nimport typeOf from \"utils/toType\"\r\nimport UID from \"uids/UID\"\r\n\r\nexport const snodename = new Object(Symbol(\"nodename\"))\r\nexport const snodetype = new Object(Symbol(\"nodetype\"))\r\nexport const snodevalue = new Object(Symbol(\"nodevalue\"))\r\nexport const stextnode = new Object(Symbol(\"textnode\"))\r\nexport const suid = new Object(Symbol(\"uid\"))\r\n\r\nlet registerIDX = 13\r\nexport default class Node extends EventTarget {\r\n\r\n    //   const unsigned short ELEMENT_NODE = 1;\r\n    //   const unsigned short ATTRIBUTE_NODE = 2;\r\n    //   const unsigned short TEXT_NODE = 3;\r\n    //   const unsigned short CDATA_SECTION_NODE = 4;\r\n    //   const unsigned short ENTITY_REFERENCE_NODE = 5; // historical\r\n    //   const unsigned short ENTITY_NODE = 6; // historical\r\n    //   const unsigned short PROCESSING_INSTRUCTION_NODE = 7;\r\n    //   const unsigned short COMMENT_NODE = 8;\r\n    //   const unsigned short DOCUMENT_NODE = 9;\r\n    //   const unsigned short DOCUMENT_TYPE_NODE = 10;\r\n    //   const unsigned short DOCUMENT_FRAGMENT_NODE = 11;\r\n    //   const unsigned short NOTATION_NODE = 12; // historical\r\n    @final\r\n    static get OBJECT_NODE() { return 13 }\r\n\r\n    @final\r\n    static get lca(){ return Node.leastCommonAncestor }\r\n    @final\r\n    static leastCommonAncestor(iterable) {\r\n        if ( !iterable[Symbol.iterator] )\r\n          throw new TypeError(ERR_NOT_ITERABLE)\r\n\r\n        const nodes = new Set([...iterable])\r\n\r\n        if ( ![...nodes].every(node => node instanceof Node) )\r\n          throw new TypeError(ERR_NOT_A_NODE)\r\n\r\n        if ( nodes.size == 1 )\r\n          return [...nodes][0]\r\n\r\n        const paths = []\r\n        nodes.forEach(node => {\r\n            const path = []\r\n\r\n            while ( node ) {\r\n                path.push(node)\r\n                node = node.parentNode\r\n            }\r\n\r\n            paths.push(path)\r\n        })\r\n\r\n        let last = null, candidates\r\n        while ( candidates = new Set([...paths.map(path => path.pop())].filter(v=>!!v)), candidates.size == 1 )\r\n          last = [...candidates][0]\r\n\r\n        return last\r\n    }\r\n\r\n    @final\r\n    static registerType(type) {\r\n        Object.defineProperty(Node, type, { value: ++registerIDX })\r\n        return Node[type]\r\n    }\r\n\r\n    constructor({ name=\"\", type=\"OBJECT_NODE\", value=null } = {}){\r\n        super()\r\n        store.get(this).set(snodename, name && name.toString ? name.toString() : \"\")\r\n        store.get(this).set(snodetype, ( typeof Node[type] == \"number\" ? Node[type] : Node.OBJECT_NODE ))\r\n        this.nodeValue = value\r\n    }\r\n\r\n    @final\r\n    get childNodes(){\r\n        const domchildren = [...store.get(this).get(sdummy).childNodes]\r\n        return domchildren && domchildren.map(dummy => store.get(dummy))\r\n    }\r\n\r\n    @final\r\n    get children(){ return this.childNodes }\r\n\r\n    @final\r\n    get firstChild(){\r\n        const domnode = store.get(this).get(sdummy).firstChild\r\n        return domnode && store.get(domnode)\r\n    }\r\n    @final\r\n    get lastChild(){\r\n        const domnode = store.get(this).get(sdummy).lastChild\r\n        return domnode && store.get(domnode)\r\n    }\r\n\r\n    @final\r\n    get nextSibling(){\r\n        const domnode = store.get(this).get(sdummy).nextSibling\r\n        return domnode && store.get(domnode)\r\n    }\r\n\r\n    @final\r\n    get nodeName(){\r\n        return store.get(this).get(snodename)\r\n    }\r\n\r\n    @final\r\n    get nodeType(){\r\n        return store.get(this).get(snodetype)\r\n    }\r\n\r\n    @final\r\n    get nodeValue(){\r\n        return store.get(this).get(snodevalue)\r\n    }\r\n    set nodeValue(v){\r\n        if ( this.nodeValue === null )\r\n          return // cannot change a null value //TODO throw error ?\r\n\r\n        store.get(this).get(sdummy).setAttribute(\"type\", typeOf(v))\r\n        if ( v != null )\r\n          store.get(this).get(sdummy).setAttribute(\"value\", v && v.toString && v.toString() )\r\n        else\r\n          store.get(this).get(sdummy).removeAttribute(\"value\")\r\n        store.get(this).set(snodevalue, v)\r\n    }\r\n\r\n    @final\r\n    get parentNode(){\r\n        const domnode = store.get(this).get(sdummy).parentNode\r\n        return domnode && store.get(domnode)\r\n    }\r\n\r\n    @final\r\n    get previousSibling(){\r\n        const domnode = store.get(this).get(sdummy).previousSibling\r\n        return domnode && store.get(domnode)\r\n    }\r\n\r\n    @final\r\n    get rootNode(){ return this.getRootNode() }\r\n\r\n    @final\r\n    get siblings(){\r\n        const domsiblings = store.get(this).get(sdummy).siblings\r\n        return domsiblings && domsiblings.map(dummy => store.get(dummy))\r\n    }\r\n\r\n    @final\r\n    get uid(){\r\n        if ( !store.get(this).has(suid) )\r\n            store.get(this).set(suid, UID.uid())\r\n          return store.get(this).get(suid)\r\n    }\r\n\r\n    @final\r\n    appendChild(node){\r\n        const parent = store.get(this).get(sdummy)\r\n        const child = store.get(node).get(sdummy)\r\n        return store.get(parent.appendChild(child))\r\n    }\r\n\r\n    @final\r\n    comparePosition(node){\r\n        const a = store.get(this).get(sdummy)\r\n        const b = store.get(node).get(sdummy)\r\n        return a.comparePosition(b)\r\n    }\r\n\r\n    @final\r\n    contains(node){\r\n        const a = store.get(this).get(sdummy)\r\n        const b = store.get(node).get(sdummy)\r\n        return a.contains(b)\r\n    }\r\n\r\n    @final\r\n    getRootNode(){\r\n        let top = store.get(target).get(sdummy)\r\n\r\n        while ( top.parentNode && store.has(top) )\r\n          top = top.parentNode\r\n\r\n        return store.get(top)\r\n    }\r\n\r\n    @final\r\n    hasChildNodes(){\r\n        return store.get(this).get(sdummy).hasChildNodes()\r\n    }\r\n\r\n    @final\r\n    insertBefore(node, referenceNode){\r\n        const parent = store.get(this).get(sdummy)\r\n        const child = store.get(node).get(sdummy)\r\n        const referenceChild = store.get(referenceNode).get(sdummy)\r\n\r\n        return store.get(parent.insertBefore(child, referenceChild))\r\n    }\r\n\r\n    @final\r\n    isEqualNode(node){ //check if node is an instance of the same class as this\r\n        return node instanceof this.constructor\r\n    }\r\n\r\n    @final\r\n    isSameNode(node){ return this === node }\r\n\r\n    @final\r\n    removeChild(node){\r\n        const parent = store.get(this).get(sdummy)\r\n        const child = store.get(node).get(sdummy)\r\n        return store.get(parent.removeChild(child))\r\n    }\r\n\r\n    @final\r\n    replaceChild(node, referenceNode){\r\n        const parent = store.get(this).get(sdummy)\r\n        const child = store.get(node).get(sdummy)\r\n        const referenceChild = store.get(referenceNode).get(sdummy)\r\n\r\n        return store.get(parent.replaceChild(child, referenceChild))\r\n    }\r\n\r\n    @final\r\n    valueOf(){ return this.nodeValue }\r\n}\r\n","\"use strict\"\r\n\r\nimport ModelChange from \"models/ModelChange\"\r\nimport Node from \"nodes/Node\"\r\nimport store from \"store\"\r\n\r\nexport const sdata = new Object(Symbol(\"data\"))\r\nexport const soverflow = new Object(Symbol(\"overflow\"))\r\nexport const spath = new Object(Symbol(\"path\"))\r\nexport const sseal = new Object(Symbol(\"seal\"))\r\nexport const sstrictseal = new Object(Symbol(\"strictseal\"))\r\nexport const ssymbol = new Object(Symbol(\"symbol\"))\r\nconst starget = new Object(Symbol(\"target\"))\r\nconst sproxy = new Object(Symbol(\"proxy\"))\r\n\r\nconst dispatchUpdate = (model, path) =>\r\n  model.dispatchEvent(new ModelChange(path)) //sync event\r\n\r\nconst xref = new Map\r\nconst proxies = new WeakMap\r\nlet revocable = null\r\n\r\nconst noop = strictlySealed => () => !strictlySealed\r\n\r\nconst revocableMeta = (model, target, path, opts={}) => {\r\n    const traps = {\r\n        get: (target, key) => {\r\n            if ( Reflect.apply(Object.prototype.hasOwnProperty, target, [key]) )\r\n              return target[key]\r\n            return revocableMeta(model, target, [...path, key], opts)\r\n        }\r\n      // TODO make the following compatible with proxy-polyfill\r\n      // , defineProperty:noop(true), deleteProperty:noop(true)\r\n      // , preventExtensions:noop(true)\r\n      , set:noop(true)\r\n    }\r\n\r\n    const { revoke, proxy } = Proxy.revocable(Object.create({}, {\r\n        model: { enumerable: true, configurable:true, value: model }\r\n      , path: { enumerable: true, configurable:true, value: path}\r\n    }), traps)\r\n\r\n    if ( revocable )\r\n      revocable()\r\n    revocable = () => setTimeout(revoke, 4)\r\n\r\n    return proxy\r\n}\r\n\r\nconst revocableProxy = (model, target, path, opts={}) => {\r\n    const traps = {\r\n        get: (target, key) => {\r\n        // if the requested property is object like, return a proxy to that object\r\n            if ( target[key] instanceof Object && !target[key].hook )\r\n              return revocableProxy(model, target[key], [...path, key], opts)\r\n        // if requested property is a function, return the result of that function\r\n            else if ( typeof target[key] == \"function\" )\r\n              return Reflect.apply(target[key], model, [])\r\n        // if the requested property is primitive value, return the primitive (no proxy)\r\n            else if ( Reflect.apply(Object.prototype.hasOwnProperty, target, [key]) )\r\n              return target[key]\r\n        // if the current value is object like, and the requested property doesn't exist and the node has a parent\r\n        // push the request to the parent\r\n            else if ( target instanceof Object && model.overflow && model.parentNode  )\r\n              try {\r\n                  let candidate = model.parentNode.io\r\n\r\n                  for ( const curr of [...path, key] )\r\n                    candidate = candidate[curr]\r\n                  return candidate\r\n              } catch(e){} //TODO\r\n\r\n            return undefined\r\n        }\r\n      // TODO make the following compatible with proxy-polyfill\r\n      // , defineProperty: (target, key, descriptor) => {\r\n      //       const rv  = Object.defineProperty(target, key, descriptor)\r\n      //       !opts.silent && dispatchUpdate(model, [...path, key])\r\n      //       return rv // must return true/false depending on success/failure\r\n      //   }\r\n      // , deleteProperty: (target, property) => {\r\n      //       if ( property in target)\r\n      //         delete target[property]\r\n      //       !opts.silent && dispatchUpdate(model, [...path])\r\n      //       return true\r\n      //\r\n      //   }\r\n      , set: (target, key, value) => {\r\n            if ( opts.hook ) {\r\n                if ( typeof value !== \"function\" )\r\n                  return false\r\n\r\n                Object.defineProperties(value, {\r\n                    toJSON: { value: () => undefined }\r\n                  , hook: { value: true }\r\n                })\r\n            }\r\n\r\n            target[key] = value\r\n            !opts.silent && dispatchUpdate(model, [...path, key])\r\n\r\n            return true // return true/false depending on success/failure\r\n        }\r\n    }\r\n\r\n    if ( model.sealed )\r\n      // TODO make the following compatible with proxy-polyfill\r\n      // traps.defineProperty = traps.deleteProperty =\r\n      // traps.preventExtensions =\r\n      traps.set =\r\n      noop(model.strictlySealed)\r\n\r\n    const { revoke, proxy } = Proxy.revocable(target, traps)\r\n    proxies.set(proxy, new WeakMap([\r\n        [starget, target]\r\n      , [sproxy, proxy]\r\n    ]))\r\n\r\n    if ( revocable )\r\n      revocable()\r\n    revocable = () => setTimeout(() => {\r\n        proxies.delete(proxy)\r\n        revoke()\r\n    }, 4)\r\n\r\n    return proxy\r\n}\r\n\r\n// export const events = {\r\n//     modelchange: ModelChange.TYPE\r\n// }\r\n\r\nexport default class Model extends Node {\r\n    static events = {\r\n        change: ModelChange.TYPE\r\n      , modelchange: ModelChange.TYPE\r\n    }\r\n    // static get events(){ return events }\r\n\r\n    static async from(){} // get from a service/ajax call\r\n\r\n    static ref(ref){  return xref.get(Symbol.for(ref)) }\r\n\r\n    static /*proxy*/ get io(){\r\n        const {proxy, revoke} = Proxy.revocable({}, {\r\n            get: (target, key) => {\r\n                const model = xref.get(Symbol.for(key))\r\n                return model.io\r\n            }\r\n        })\r\n\r\n        if ( revocable )\r\n          revocable()\r\n        revocable = () => setTimeout(revoke, 4)\r\n        return proxy\r\n    }\r\n\r\n    static unmask(proxy){\r\n        if ( !proxies.has(proxy) )\r\n          return null\r\n        return proxies.get(proxy).get(starget)\r\n    }\r\n\r\n    constructor({ref, overflow=true, seal=false, strictseal=false}={}) { // ref can be anything compatible with a map key\r\n        super()\r\n        // define a symbol(uid) ( uid comes from seithr.Node\r\n        // save symbol to model link\r\n        // if a ref is passed, save ref to model link\r\n        store.get(this).set(ssymbol, Symbol.for(this.uid))\r\n        store.get(this).set(soverflow, overflow)\r\n        xref.set(this.valueOf(), this)\r\n        xref.set(store.get(this).get(ssymbol), this)\r\n        if ( ref ) xref.set(Symbol.for(ref), this)\r\n        store.get(this).set(sdata, null)\r\n\r\n        if ( seal || strictseal )\r\n          this.seal(strictseal)\r\n    }\r\n\r\n    async fetch(){} //fetch data from a XMLHttpRequest ( Service )\r\n\r\n    get hook(){\r\n        if ( store.get(this).get(sdata) instanceof Object )\r\n          return revocableProxy(this, store.get(this).get(sdata), [], {hook:true})\r\n        return store.get(this).get(sdata)\r\n    }\r\n\r\n    /* proxy */ get io(){\r\n      if ( store.get(this).get(sdata) instanceof Object )\r\n        return revocableProxy(this, store.get(this).get(sdata), [])\r\n      return store.get(this).get(sdata)\r\n    }\r\n    set io(v){\r\n        store.get(this).set(sdata, v)\r\n        dispatchUpdate(this, [])\r\n    }\r\n\r\n    /* proxy */ get m(){\r\n        return revocableMeta(this, store.get(this).get(sdata), [], {})\r\n    }\r\n    /* proxy */ get meta(){ return this.m }\r\n\r\n    /* proxy */ get silentio(){ return revocableProxy(this, store.get(this).get(sdata), [], {silent:true}) }\r\n    set silentio(v){ store.get(this).set(sdata, v) }\r\n\r\n    get overflow(){ return store.get(this).get(soverflow) }\r\n    set overflow(bool){ store.get(this).set(soverflow, !!bool) }\r\n\r\n    seal(strict){\r\n        store.get(this).set(sseal, true)\r\n        store.get(this).set(sstrictseal, !!strict)\r\n    }\r\n    get sealed(){ return !!store.get(this).get(sseal) }\r\n    get strictlySealed(){ return this.sealed && !!store.get(this).get(sstrictseal) }\r\n\r\n    toJSON(){ return JSON.parse(JSON.stringify(store.get(this).get(sdata))) } //prevent access to raw object via toJSON()\r\n    toString(){ return this.valueOf() }\r\n    valueOf(){ return Symbol.keyFor(store.get(this).get(ssymbol)) }\r\n}\r\n","\"use strict\"\r\n\r\nimport { bound, final, frozen } from \"decorators\"\r\nimport { ERR_STRING_EXPECTED } from \"errors\"\r\nimport Model from \"models/Model\"\r\nimport Event from \"events/Event\"\r\nimport store from \"store\"\r\nimport typeOf from \"utils/toType\"\r\n\r\nconst sdomain = new Object(Symbol(\"domain\"))\r\nconst sexpires = new Object(Symbol(\"expires\"))\r\nconst sfrombrowser = new Object(Symbol(\"frombrowser\"))\r\nconst spath = new Object(Symbol(\"path\"))\r\nconst sname = new Object(Symbol(\"name\"))\r\nconst ssession = new Object(Symbol(\"session\"))\r\n\r\nconst LIFESPAN = 15552000000\r\nexport const TOP_DOMAIN = (() => {\r\n    const cookiestr = \"__seithrtest=testcookie\"\r\n    const cookie = domain => {\r\n        document.cookie = cookiestr+\"; domain=\"+domain\r\n\r\n        if ( document.cookie.indexOf(cookiestr) != -1 ) {\r\n            document.cookie = cookiestr+\"; domain=\"+domain+\"; expires=\" + new Date( +(new Date) - 1000 ).toUTCString()\r\n            return true\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n    const split = location.hostname.split(\".\")\r\n\r\n    let curr = \"\"\r\n    let i = split.length\r\n    let hit = false\r\n\r\n    while (i--)\r\n      if ( curr == split.slice(i).join(\".\"), hit = cookie(curr), hit )\r\n        return curr\r\n})()\r\n\r\nexport class Sync extends Event {\r\n    static get TYPE(){ return \"cookiesync\" }\r\n\r\n    constructor(from_browser=false){\r\n        super(Sync.TYPE)\r\n        store.get(this).set(sfrombrowser, from_browser)\r\n    }\r\n\r\n    get source(){ return store.get(this).get(sfrombrowser) ? \"browser\" : \"model\" }\r\n}\r\n\r\nexport default class Cookie extends Model {\r\n    @frozen\r\n    static events = {\r\n        sync: Sync.TYPE\r\n    }\r\n    //static get events(){ return { Sync } }\r\n    static get COOKIE_ENABLED(){ return navigator.cookieEnabled }\r\n    static get TOP_DOMAIN(){ return TOP_DOMAIN }\r\n\r\n    constructor({ name=null, path=\"/\", domain=Cookie.TOP_DOMAIN, expires, maxAge, session=false } = {}){\r\n        super()\r\n\r\n        if ( typeOf(name) != \"string\" )\r\n          throw new Error(ERR_STRING_EXPECTED)\r\n\r\n        store.get(this).set(sdomain, typeOf(domain) == \"string\" ? domain : Cookie.TOP_DOMAIN)\r\n        store.get(this).set(sexpires, !!session ? \"\"\r\n                                    : !isNaN( +(new Date(expires)) ) ? new Date(expires).toUTCString()\r\n                                    : new Date( +(new Date) + (+maxAge||LIFESPAN) ).toUTCString())\r\n        store.get(this).set(sname, name)\r\n        store.get(this).set(spath, typeOf(path) == \"string\" ? path : \"/\")\r\n        store.get(this).set(ssession, !!session)\r\n\r\n        this.sync(true)\r\n\r\n        window.addEventListener(\"focus\", e => this.sync(true))\r\n        this.addEventListener(Model.events.change, () => this.sync(false))\r\n    }\r\n\r\n    get COOKIE_ENABLED(){ return Cookie.COOKIE_ENABLED }\r\n    get TOP_DOMAIN(){ return Cookie.TOP_DOMAIN }\r\n\r\n    get domain(){ return store.get(this).get(sdomain) }\r\n    get expires(){ return store.get(this).get(sexpires) }\r\n    get path(){ return store.get(this).get(spath) }\r\n    get name(){ return store.get(this).get(sname) }\r\n    get session(){ return store.get(this).set(ssession) }\r\n\r\n    @final\r\n    clear(){\r\n        this.io = null\r\n    }\r\n\r\n    @final\r\n    sync(from_browser=false){\r\n        if ( from_browser ) {\r\n            const exists = document.cookie.match(store.get(this).get(sname)+\"=([^;]*)\")\r\n            let data\r\n\r\n            if ( exists ) {\r\n                try {\r\n                    data = JSON.parse(unescape(exists[1]))\r\n                } catch(e) {\r\n                    console.error(e)\r\n                    data = {}\r\n                }\r\n            }\r\n\r\n            this.io = data\r\n            this.dispatchEvent(new Sync(true))\r\n            return\r\n        }\r\n\r\n        const string = escape(JSON.stringify(this))\r\n\r\n        if ( string.length )\r\n          document.cookie = [this.name, \"=\", string, \"; domain=\", this.domain, \"; path=\", this.path, \";\", this.session?\"\":\"expires=\"+this.expires+\";\"].join(\"\")\r\n        else\r\n          document.cookie = [this.name, \"=0; domain=\", this.domain, \"; path=\", this.path, \"; expires=\", new Date( +(new Date) - 1000 ).toUTCString(), \";\"].join(\"\")\r\n\r\n        this.dispatchEvent(new Sync(false))\r\n        return\r\n    }\r\n\r\n\r\n}\r\n","\"use strict\"\n\nimport store from \"store\"\n\nconst hookedprops = new WeakMap\nconst defaulthandler = function(v){\n    return [{ property: this.property, value: v }]\n}\n\nexport default class CSSHook {\n    static getHook(property){\n        if ( hookedprops.has(property) )\n          return [...hookedprops.get(property)]\n        else return [{transform: defaulthandler.bind({property})}]\n    }\n\n    constructor(property, propertyHandler=defaulthandler){\n        if ( typeOf(property) !== \"string\" )\n          throw new TypeError(ERR_STRING_EXPECTED)\n        if ( typeOf(prophandler) !== \"function\" )\n          throw new TypeError(ERR_FN_EXPECTED)\n\n        store.set(this, new WeakMap)\n        store.get(this).set(sproperty, property)\n        store.get(this).set(sprophandler, propertyHandler)\n    }\n\n    get property(){ return store.get(this).get(sproperty) }\n\n    transform(v){\n        return Reflect.apply(store.get(this).get(sprophandler), this, v)\n    }\n}\n","\"use strict\"\n\nimport store from \"store\"\n\nconst  def_delimiter = \"=\"\nconst def_separator = \"&\"\nconst def_key_separator = \".\"\nconst rspacetoplus = /%20/g\nconst rplustospace = /\\+/g\n\nconst sdelimiter = new Object(Symbol())\nconst sseparator = new Object(Symbol())\n\nexport default class Serializer {\n    static objectify(string=\"\"){\n        const object = {}\n        const del = this && this.delimiter  || def_delimiter\n        const sep = this && this.separator  || def_separator\n\n        void (string.search(sep) != -1 ? string.split(sep) : string.length ? [string] : [])\n          .forEach(pair => {\n                pair = pair.replace(rplustospace, \"%20\")\n                const idx = pair.indexOf(del)\n                const key = unescape(pair.split(del, 1)[0])\n                const value = decodeURIComponent(pair.slice(idx+1))\n                object[key.trim()] = idx != -1 ? value : true\n          })\n\n        return object\n    }\n\n    static serialize(object){\n        const del = this && this.delimiter  || def_delimiter\n        const sep = this && this.separator  || def_separator\n\n        return [\n          ...Object.keys(object)\n              .map(key => `${escape(key)}${del}${encodeURIComponent(object[key])}`)\n        ].join(sep).replace(rspacetoplus, \"+\")\n    }\n\n    static stringify(object){\n        const del = this && this.delimiter  || def_delimiter\n        const sep = this && this.separator  || def_separator\n\n        return [\n          ...Object.keys(object)\n              .map(key => `${key}${del}${object[key]}`)\n        ].join(sep)\n    }\n\n    constructor({ delimiter=def_delimiter, separator=def_separator } = {}){\n        store.set(this, new WeakMap)\n        store.get(this).set(sdelimiter, delimiter)\n        store.get(this).set(sseparator, separator)\n    }\n\n    get delimiter(){ return store.get(this).get(sdelimiter) }\n    get separator(){ return store.get(this).get(sseparator) }\n\n    objectify(string){ return Reflect.apply(Serializer.objectify, this, [string]) }\n    serialize(object){ return Reflect.apply(Serializer.serialize, this, [object]) }\n    stringify(object){ return Reflect.apply(Serializer.stringify, this, [object]) }\n}\n","\"use strict\"\n\nimport { ERR_STRING_EXPECTED, ERR_FN_EXPECTED } from \"errors\"\nimport CSSHook from \"css/CSSHook\"\nimport Event from \"events/Event\"\nimport Node from \"nodes/Node\"\nimport Serializer from \"serializers/Serializer\"\nimport store from \"store\"\nimport typeOf from \"utils/toType\"\n\nimport { sdummy } from \"events/EventTarget\"\nconst scssrule = new Object(Symbol())\nconst sproperty = new Object(Symbol())\nconst sprophandler = new Object(Symbol())\nconst sselectortext = new Object(Symbol())\n\nclass CSSRuleEvent extends Event {\n    static get TYPE(){ return \"cssruleevent\" }\n\n    constructor(type, {cssRule, from, to}){\n        super(type||CSSRuleEvent.TYPE)\n        store.get(this).set(scssrule, cssRule)\n    }\n\n    get cssRule(){ return store.get(this).get(scssrule) }\n}\n\nexport class Reset extends CSSRuleEvent {\n    static get TYPE(){ return \"reset\" }\n    constructor({ cssRule, from, to }){\n        super(Reset.TYPE, { cssRule, from, to })\n    }\n}\n\nexport class TextUpdate extends CSSRuleEvent {\n    static get TYPE(){ return \"textupdate\" }\n    constructor({ cssRule, from, to }){\n        super(TextUpdate.TYPE, { cssRule, from, to })\n    }\n}\n\nexport class SelectorUpdate extends CSSRuleEvent {\n    static get TYPE(){ return \"selectorupdate\" }\n    constructor({ cssRule, from, to }){\n        super(SelectorUpdate.TYPE, { cssRule, from, to })\n    }\n}\n\nconst rcssparse = /(?:\\s|$)*([^{]*)(?:\\s|$)*{(.*)}(?:\\s|$)*/\nconst serializer = new Serializer({ delimiter: \":\", separator: \";\" })\n\nexport default class CSSRule extends Node {\n    static events = {\n        reset: Reset.TYPE\n      , textupdate: TextUpdate.TYPE\n      , SelectorUpdate: SelectorUpdate.TYPE\n    }\n    //static get events(){ return { Reset, TextUpdate, SelectorUpdate} }\n\n    static objectifyCssText(string){ return serializer.objectify(string) }\n    static serializeCssText(object){ return serializer.stringify(object)  }\n    static hook(property, propertyHandler){ return new CSSHook(property, propertyHandler) }\n\n    constructor(...args){\n        super()\n\n        let fromstr = false\n\n        store.get(this).set(sselectortext, args.length > 1 && typeOf(args[0]) == \"string\" && isNaN(+args[0]) ? args.shift()\n                      : args.length == 1 && typeOf(args[0]) == \"string\" ? (fromstr = true, (rcssparse.exec(args[0])||[])[1]||\"\")\n                      : (fromstr = true, args.shift(), (rcssparse.exec(args[0])||[])[1]||\"\"))\n\n        this.cssText = fromstr ? (rcssparse.exec(args.pop())||[])[2]||\"\"\n                     : typeOf(args[args.length-1]) == \"string\" ? args.pop()\n                     : typeOf(args[args.length-1]) == \"object\" ? CSSRule.serializeCssText(args.pop())\n                     : \"\"\n    }\n\n    get cssText(){ return store.get(this).get(sdummy).style.cssText }\n    set cssText(v){\n        const from = store.get(this).get(sdummy).style.cssText\n        store.get(this).get(sdummy).style.cssText = \"\"\n\n        const props = CSSRule.objectifyCssText(v)\n        Object.keys(props).forEach(k => this.setProperty(k, props[k]))\n        const to = store.get(this).get(sdummy).style.cssText\n\n        if ( from !== to )\n          this.dispatchEvent(new Reset({ cssRule:this, from, to }))\n    }\n    get selectorText(){ return store.get(this).get(sselectortext) }\n    set selectorText(to){\n        const from = this.selectorText\n        store.get(this).set(sselectortext, to)\n\n        if ( from && from !== \"null\" && from !== to )\n          this.dispatchEvent(new SelectorUpdate({ cssRule: this, from, to }))\n    }\n\n    getProperty(...args){\n        return Reflect.apply(CSSStyleDeclaration.prototype.getPropertyValue, store.get(this).get(sdummy).style, args)\n    }\n\n    setProperty(prop, value){\n        const from = this.getProperty(prop)\n\n        CSSHook.getHook(prop)\n          .forEach(({transform}) => {\n              transform(value)\n                .forEach(({property, value})=>{\n                    store.get(this).get(sdummy).style.setProperty(property, value)\n\n                    const to = this.getProperty(prop)\n\n                    if ( from !== to )\n                      this.dispatchEvent(new TextUpdate({ cssRule:this, from, to }))\n                })\n          })\n    }\n\n    toString(){\n        return `${this.selectorText}{${this.cssText}}`\n    }\n\n}\n","\"use strict\"\n\nimport { ERR_CSSTEXT } from \"errors\"\nimport Event from \"events/Event\"\nimport CSSRule from \"css/CSSRule\"\nimport Node from \"nodes/Node\"\nimport store from \"store\"\n\nconst rconditional = /^\\@(document|supports|media)([^\\{]*)\\{(.*)\\}/i\nconst updaters_text = new WeakMap\n\nconst sactive = new Object(Symbol())\nexport const sadd = new Object(Symbol())\nconst satsheet = new Object(Symbol())\nconst sbasecsstext = new Object(Symbol())\nconst sbufferrules = new Object(Symbol())\nconst sconditiontext = new Object(Symbol())\nexport const sremove = new Object(Symbol())\nconst srules = new Object(Symbol())\nconst ssync = new Object(Symbol())\nconst stype = new Object(Symbol())\n\nexport default class CSSConditionalRule extends Node {\n    constructor(condition = \"\"){\n        super()\n\n        const atrule = rconditional.exec(condition)\n        const type = atrule[1]\n        const conditionText = atrule[2]\n        const cssText = atrule[3]\n\n        if ( !type || !conditionText )\n          throw new TypeError(ERR_CSSTEXT)\n\n        store.set(this, new WeakMap)\n        store.get(this).set(stype, type)\n        store.get(this).set(sconditiontext, conditionText)\n        store.get(this).set(sbasecsstext, cssText.trim())\n\n        store.get(this).set(ssync, false)\n        store.get(this).set(srules, [])\n        store.get(this).set(sbufferrules, [])\n        store.get(this).set(satsheet, [])\n        store.get(this).set(sadd, rule => {\n            store.get(this).get(satsheet).push(rule)\n            store.get(this).set(sactive, true)\n            this.insertRule(store.get(this).get(sbufferrules))\n        })\n        store.get(this).set(sremove, rule => {\n            let idx = store.get(this).get(satsheet)\n\n            if ( idx !== -1 )\n              store.get(this).get(satsheet).splice(idx, 1)\n\n            if ( !store.get(this).get(satsheet).length )\n              store.get(this).set(sactive, false)\n        })\n    }\n\n    get condition(){ return store.get(this).get(stype) }\n    get conditionText(){ return store.get(this).get(sconditiontext) }\n    get cssText(){\n        if ( store.get(this).get(sactive) )\n          return store.get(this).get(satsheet)[0].cssText\n        return store.get(this).get(sbasecsstext)\n    }\n\n    deleteRule(...args){\n        const rules = args && args[0][Symbol.iterator] ? args.shift()\n                    : args.length ? args\n                    : []\n\n        rules.forEach(rule => {\n            let is_rule = false\n            let is_conditional = false\n\n            rule = rule instanceof CSSRule ? (is_rule = true, rule)\n                 : rule instanceof CSSConditionalRule ? (is_conditional = true, rule)\n                 : null\n\n            if ( !rule )\n              return\n\n            if ( !store.get(this).get(sactive) ) {\n                let idx\n\n                while ( idx = store.get(this).get(sbufferrules).indexOf(rule), idx !== -1 )\n                  store.get(this).get(sbufferrules).splice(idx, 1)\n            }\n\n            else {\n                if ( is_rule ) {\n                    store.get(this).get(satsheet).forEach(cond_rule => {\n                        let idx = -1\n\n                        while ( idx = store.get(this).get(srules).indexOf(rule), idx != -1 )\n                          cond_rule.deleteRule(idx),\n                          store.get(this).get(srules).splice(idx, 1)\n\n                        while ( idx = store.get(this).buffer_rules.indexOf(rule), idx != -1 )\n                          store.get(this).get(sbufferrules).splice(idx, 1)\n                    })\n\n                    if ( updaters_text.has(rule) )\n                        rule.removeEventListener(cssRule.events.textupdate, updaters_text.get(rule)),\n                        updaters_text.delete(rule)\n                } else if ( is_conditional ){\n                    store.get(this).get(satsheet).forEach(cond_rule => {\n                        let idx = -1\n                        while ( idx = store.get(this).get(srules).indexOf(rule), idx != -1 ) {\n                            store.get(rule).get(sremove)( cond_rule.cssRules[idx] )\n                            cond_rule.deleteRule(idx)\n                            store.get(this).get(srules).splice(idx, 1)\n                        }\n\n                        while ( idx = store.get(this).get(sbufferrules).indexOf(rule), idx != -1 )\n                          store.get(this).get(sbufferrules).splice(idx, 1)\n                    })\n                }\n            }\n        })\n    }\n\n    insertRule(...args){\n        const rules = args && args[0][Symbol.iterator] ? args.shift()\n                    : args.length ? args\n                    : []\n\n        rules.forEach(rule => {\n            let is_rule = false\n            let is_conditional = false\n\n            rule = rule instanceof CSSRule ? (is_rule = true, rule)\n                 : rule instanceof CSSConditionalRule ? (is_conditional = true, rule)\n                 : (is_rule = true, new CSSRule(rule))\n\n            store.get(this).get(sbufferrules).push(rule)\n\n            if ( store.get(this).get(sactive) ) {\n                if ( is_rule ) {\n                    let idx = -1\n\n                    store.get(this).get(satsheet).forEach(cond_rule => {\n                        if ( idx == -1 )\n                          idx = cond_rule.cssRules.length,\n                          store.get(this).get(srules)[idx] = rule\n\n                        cond_rule.insertRule(rule.toString(), idx)\n                    })\n\n                    if ( !updaters_text.has(rule) )\n                      updaters_text.set(rule, ({cssRule}) => {\n                          store.get(this).get(satsheet).forEach(cond_rule => {\n                              let idxs = []\n                              store.get(this).get(srules).forEach((rule, idx) => {\n                                  if ( rule === cssRule ) idxs.push(idx)\n                              })\n                              idxs.forEach(idx => cond_rule.cssRules[idx].style.cssText = cssRule.cssText)\n                          })\n                      })\n\n                    rule.addEventListener(CSSRule.events.textupdate, updaters_text.get(rule))\n                }\n                else if ( is_conditional ){\n                    let idx = -1\n                    store.get(this).get(satsheet).forEach(cond_rule => {\n                        if ( idx == -1 )\n                            idx = cond_rule.cssRules.length,\n                            store.get(this).get(srules)[idx] = rule\n\n                        cond_rule.insertRule(rule.toString(), idx)\n                        store.get(rule).get(sadd)( cond_rule.cssRules[idx] )\n                    })\n                }\n\n            }\n        })\n    }\n\n    toString(){ return `@${this.condition}${this.conditionText}{${this.cssText}}` }\n}\n","\"use strict\"\n\nimport { ERR_CSSTEXT } from \"errors\"\nimport CSSConditionalRule from \"css/CSSConditionalRule\"\n\nconst rconditional = /^\\@media([^\\{]*)\\{(.*)\\}/i\nexport default class CSSMediaRule extends CSSConditionalRule {\n    constructor(condition = \"\"){\n        if ( !rconditional.exec(condition) )\n          throw new TypeError(ERR_CSSTEXT)\n\n        super(condition)\n    }\n}\n","\"use strict\"\n\nconst gather = () => Object.seal({\n    nodes: {\n        documentElement: document.documentElement\n      , head: document.head\n      , title: function(){\n          const node = document.head.getElementsByTagName(\"title\")[0]\n\n          if ( node )\n            return node\n          return document.head.appendChild(document.createElement(\"title\"))\n        }()\n      , viewport: function(){\n            let node = document.head.querySelector(\"meta[name=viewport]\")\n\n            if ( node )\n              return node\n\n            node = document.createElement(\"meta\")\n            node.setAttribute(\"name\", \"viewport\")\n            node.setAttribute(\"content\", \"\")\n\n            return document.head.appendChild(node)\n        }()\n      , body: document.body\n    }\n})\n\nconst ready = new Promise(resolve => {\n    let ready = false\n\n    const onready = () => {\n        if ( ready ) return\n        if ( !document.body ) return setTimeout(onready, 4)\n\n        ready = true\n        resolve(gather())\n    }\n\n    const isready = () => \"interactive, complete\".indexOf(document.readyState) != -1 ? (onready(), true) : false\n\n    if ( !isready() )\n      window.addEventListener(\"DOMContentLoaded\", onready, true),\n      window.addEventListener(\"load\", onready, true),\n      document.addEventListener(\"readystatechange\", isready, true)\n})\n\nexport default (async () => await ready)()\n","\"use strict\"\n\nconst dummy = document.createElement(\"a\")\nexport default path => {\n    dummy.href = path\n\n    return dummy.hostname === location.hostname\n         ? true\n         : !dummy.hostname ? true // ie/edge doesn't set the hostname if not \"necessary\"\n         : false\n}\n","\"use strict\"\r\n\r\nimport { ERR_READYSTATEFUL_NOT_IMPLEMENTED } from \"errors\"\r\nimport Event from \"events/Event\"\r\nimport store from \"store\"\r\n\r\nexport const sfrom = new Object(Symbol(\"from\"))\r\nexport const sreadystate = new Object(Symbol(\"readystate\"))\r\nexport const sto = new Object(Symbol(\"to\"))\r\n\r\nexport class ReadyStateChange extends Event {\r\n    static TYPE = \"readystatechange\"\r\n\r\n    constructor({ from, to }) {\r\n        super(ReadyStateChange.type, { bubbles: true, cancelable: false })\r\n        store.get(this).set(sfrom, from)\r\n        store.get(this).set(sto, to)\r\n    }\r\n\r\n    get from() { return store.get(this).get(sfrom) }\r\n    get to() { return store.get(this).get(sto) }\r\n}\r\n\r\nexport default class ReadyStateFul {\r\n    static events = {\r\n        readystatechange: ReadyStateChange.TYPE\r\n    }\r\n\r\n    static get UNINITIALIZED() { return 0b0 }\r\n    static get [0b0]() { return \"UNINITIALIZED\" }\r\n    static readyStateChange(rsf, to) {\r\n        if ( !(rsf instanceof ReadyStateFul) )\r\n          throw new TypeError(ERR_READYSTATEFUL_NOT_IMPLEMENTED)\r\n        const from = rsf.readyState || ReadyStateFul.UNINITIALIZED\r\n        store.get(rsf).set(sreadystate, to)\r\n        rsf.dispatchEvent(new ReadyStateChange({ from, to }))\r\n    }\r\n\r\n    get readyState() { return store.get(this).get(sreadystate) || ReadyStateFul.UNINITIALIZED }\r\n}\r\n","\"use strict\"\n\nimport { ERR_GENERATOR_EXPECTED } from \"errors\"\nimport store from \"store\"\n\nexport default async (generatorFn) => {\n    const typeOf = Reflect.apply(Object.prototype.toString, generatorFn, []).slice(8, -1)\n\n    const generator = typeOf === \"GeneratorFunction\" ? generatorFn()\n              : typeOf === \"Generator\" ? generatorFn\n              : new TypeError(ERR_GENERATOR_EXPECTED)\n\n    return new Promise(resolve => {\n        if ( generator instanceof Error )\n          throw generator\n\n        store.set(generatorFn, true)\n        const onframe = () => {\n            if ( store.get(generatorFn) === false ) {\n                store.delete(generatorFn)\n                return resolve(null)\n            }\n\n            const { value, done } = generator.next()\n\n            if ( !done ) requestAnimationFrame(onframe)\n            else {\n              resolve(value)\n              store.delete(generatorFn)\n            }\n        }\n        requestAnimationFrame(onframe)\n    })\n}\n","\"use strict\"\n\nimport { ERR_FN_EXPECTED, ERR_STRING_EXPECTED } from \"errors\"\nimport store from \"store\"\nimport typeOf from \"utils/toType\"\n\nconst scancelable = new Object(Symbol())\nconst scancelled = new Object(Symbol())\nconst sdetail = new Object(Symbol())\nexport const shrt = new Object(Symbol())\nexport const smatches = new Object(Symbol())\nconst spath = new Object(Symbol())\nconst sresponse = new Object(Symbol())\nconst srequest = new Object(Symbol())\nexport const sstate = new Object(Symbol(\"state\"))\nexport const starget = new Object(Symbol())\nexport const stimestamp = new Object(Symbol())\nconst swait = new Object(Symbol())\n\nexport default class Route {\n    static get states(){\n        return Object.seal({\n            UNINITIALIZED: 0\n          , INITIALIZED: 1\n          , PAUSED: 2\n          , STOPPED: 3\n          , RUNNING: 4\n        })\n    }\n\n    constructor(path, {cancelable=true, request=null, response=null, detail=null} = {}){\n        store.set(this, new WeakMap)\n\n        if ( typeOf(path) != \"string\" )\n          throw new TypeError(ERR_STRING_EXPECTED)\n        store.get(this).set(spath, path)\n        store.get(this).set(sdetail, detail)\n        store.get(this).set(sresponse, response)\n        store.get(this).set(srequest, request)\n\n        store.get(this).set(scancelable, !!cancelable)\n        store.get(this).set(sstate, Route.states.INITIALIZED)\n        store.get(this).set(stimestamp, null)\n\n    }\n\n    get cancelable(){ return store.get(this).get(scancelable) }\n    get cancelled(){ return store.get(this).get(scancelled) || false }\n    set cancelled(v){ store.get(this).set(scancelled, !!v) }\n    get detail(){ return store.get(this).get(sdetail) }\n    get hirestimestamp(){ return store.get(this).get(shrt) }\n    get hrt(){ return this.hirestimestamp }\n    get matches(){ return store.get(this).get(smatches) }\n    get path(){ return store.get(this).get(spath) }\n    get response(){ return store.get(this).get(sresponse) }\n    get request(){ return store.get(this).get(srequest) }\n    get state(){ return store.get(this).get(sstate) || Route.states.UNINITIALIZED }\n    get target(){ return store.get(this).get(starget) }\n    get timestamp(){ return store.get(this).get(stimestamp) }\n\n\n    preventDefault(){ return this.cancelled = true }\n\n    async wait(fn){\n        if ( typeOf(fn) == \"function\" ) {\n          store.get(this).set(sstate, Route.states.PAUSED)\n          store.get(this).set(swait, new Promise(resolve => fn(resolve))\n          .then(() => {\n              store.get(this).set(sstate, Route.states.INITIALIZED)\n              store.get(this).delete(swait)\n          }))\n        }\n\n        return await (store.get(this).get(swait) || Promise.resolve() )\n    }\n\n}\n","\"use strict\"\n\nimport { ERR_NOTROUTE, ERR_ROUTE_BUSY, WARN_LATE_NEXT } from \"errors\"\nimport Event from \"events/Event\"\nimport EventTarget from \"events/EventTarget\"\nimport Route from \"routing/Route\"\nimport store from \"store\"\nimport typeOf from \"utils/toType\"\n\nimport { shrt, smatches, sstate, starget, stimestamp } from \"./Route.mjs\"\n\nconst shits = new Object(Symbol())\n\nconst bundleHandlers = ({routes}) => {\n    const wildcards = []\n    const handlers = []\n\n    for ( let [path, handler] of routes ) {\n        if ( RouteDispatcher.isRouteHandler(handler) )\n          if ( path === \"*\" )\n            wildcards.push([path, handler])\n          else\n            handlers.push([path, handler])\n\n        if ( typeOf(handler) == \"array\" )\n          handler.forEach(function(handler){\n              if ( RouteDispatcher.isRouteHandler(handler) )\n                if ( path === \"*\" )\n                  wildcards.push([path, handler])\n                else\n                  handlers.push([path, handler])\n          })\n    }\n\n    return [...wildcards, ...handlers]\n}\n\nconst cache = Object.create(null)\n\nconst getRule = str => {\n    if ( !cache[str] )\n      if ( str.indexOf(\":\") == -1 )\n        cache[str] = new RegExp(\"^\"+str+\"$\", \"i\")\n      else {\n        const assignments = []\n        const regexp = []\n        const split = []\n        const join = []\n        let pile = \"\"\n\n        for ( let i = 0, l = str.length; i <= l; i++ )\n          void function(char){\n              if ( i === l ) {\n                  if ( pile.length )\n                    split.push(pile)\n              }\n              else if ( char === \"/\")\n                split.push(pile),\n                join.push(char),\n                pile = \"\"\n              else if ( char === \".\" && str[i+1] === \":\" )\n                split.push(pile),\n                join.push(char),\n                pile = \"\"\n              else\n                pile += char\n          }( str[i] )\n\n        while ( split.length )\n          void function(){\n              const part = split.shift()\n              const joiner = join.shift()\n              let match\n\n              if ( part[0] === \":\" ) {\n\n                if ( match = part.match(/^:(\\w+)(\\(.*\\))$/), match ) {\n                  assignments.push(match[1])\n                  regexp.push(match[2])\n                } else {\n                  assignments.push(part.slice(1))\n                  regexp.push(\"([^\\\\\"+(joiner||\"\\/\")+\"]*)\")\n                }\n\n              } else {\n                regexp.push(part)\n              }\n\n              joiner && regexp.push(\"(?:\\\\\"+joiner+\")\")\n          }()\n\n        cache[str] = new RegExp(\"^\"+regexp.join(\"\")+\"$\", \"i\")\n        cache[str].assignments = assignments\n      }\n\n    return cache[str]\n}\n\nconst dispatcher = function(route, path){\n    const rule = getRule(path)\n    const match = route.path.match(rule)\n\n    if ( !match )\n      return false\n\n    if ( match.length == 1 || !rule.assignments )\n      return true\n\n    return function(){\n        for ( let i = 0, l = rule.assignments.length ; i < l; i++ )\n          route.matches[rule.assignments[i]] = match[i+1]\n\n        return route\n    }()\n}\n\nconst nexts = new WeakMap\n\nexport class Routing extends Event {\n    static get TYPE(){ return \"routing\" }\n\n    constructor(hit){\n        super(Routing.TYPE)\n        store.get(this).set(shits, hit)\n    }\n\n    get count(){ return store.get(this).get(shits) }\n}\n\nexport default class RouteDispatcher extends EventTarget {\n    static isRouteHandler(o){ return !!o && (typeOf(o) == \"function\" || typeOf(o.handleRoute) == \"function\" ) }\n\n    constructor({ route, target }){\n        super()\n\n        if ( !(route instanceof Route) )\n          throw new TypeError(ERR_NOTROUTE)\n\n        if ( route.state !== Route.states.INITIALIZED )\n          throw new Error(ERR_ROUTE_BUSY)\n\n        store.get(this).set(shits, 0)\n\n        store.get(route).set(sstate, Route.states.RUNNING)\n        store.get(route).set(starget, target)\n        store.get(route).set(smatches, {})\n        store.get(route).set(stimestamp, Date.now())\n        store.get(route).set(shrt, performance.now())\n\n        const handlers = bundleHandlers(target)\n\n        const onstop = () => {\n            store.get(route).set(sstate, Route.states.INITIALIZED)\n            this.dispatchEvent(new Routing(store.get(this).get(shits)) )\n        }\n\n        const dispatchLoop = function*(){\n            while ( !!handlers.length ) {\n                if ( route.state === Route.states.STOPPED )\n                  return\n                store.get(route).set(sstate, Route.states.RUNNING)\n\n                const [path, handler] = handlers.shift()\n\n                yield new Promise((resolve, reject) => {\n                    const match = path === \"*\" || dispatcher(route, path)\n\n                    if ( !match )\n                      return resolve(0)\n\n                    let hit = path === \"*\" ? 0 :  1\n                    let stop = path === \"*\" ? false : true\n\n                    let next = is_hit => {\n                        nexts.set(route, () => console.warn(WARN_LATE_NEXT)) //can only be invoked once and during the turn of the exec time of the handler\n\n                        stop = false\n                        if ( typeOf(is_hit) == \"boolean\" )\n                          hit = !!is_hit ? 1 : 0\n                    }\n\n                    nexts.set(route, next)\n                    const nextProxy = (...args) => Reflect.apply(nexts.get(route), null, args)\n\n                    if ( handler.handleRoute )\n                      handler.handleEvent.call(handler, route, nextProxy)\n                    else\n                      handler.call(null, route, nextProxy)\n\n                    const onend =  () => {\n                        nexts.set(route, () => console.warn(WARN_LATE_NEXT)) //can only be invoked once and during the turn of the exec time of the handler\n\n                        if ( stop )\n                          store.get(route).set(sstate, Route.states.STOPPED)\n\n                        resolve(hit)\n                    }\n\n                    if ( route.state === Route.states.PAUSED )\n                      route.wait().then(onend)\n                    else onend()\n                })\n            }\n        }.call(this)\n\n        const next = () => {\n            const iteration = dispatchLoop.next()\n\n            if ( iteration.done )\n              return onstop()\n            else\n              iteration.value\n              .then(hit => {\n                  store.get(this).set(shits,  store.get(this).get(shits) + hit)\n                  next()\n              })\n        }\n\n        next()\n    }\n\n}\n","\"use strict\"\n\nimport { ERR_RHANDLER, ERR_STRING_EXPECTED } from \"errors\"\n\nimport Node from \"nodes/Node\"\nimport Route from \"routing/Route\"\nimport RouteDispatcher from \"routing/RouteDispatcher\"\nimport store from \"store\"\nimport typeOf from \"utils/toType\"\n\nconst sroutes = new Object(Symbol())\n\nexport default class Router extends Node {\n    static get isRouteHandler(){ return RouteDispatcher.isRouteHandler }\n\n    constructor(){\n        super()\n        store.get(this).set(sroutes, new Map)\n    }\n\n    get routes(){ return new Map(store.get(this).get(sroutes)) }\n\n    addRouteHandler(path=null, handler=Function.prototype){\n        if ( arguments.length > 1 && typeOf(path) == \"array\") {\n            let count = 0\n\n            for ( path of arguments[0] )\n              count += 1, this.addRouteHandler(path, handler)\n\n            return count\n        }\n\n        if ( typeOf(path) != \"string\" )\n          throw new TypeError(ERR_STRING_EXPECTED)\n\n        if ( !Router.isRouteHandler(handler) )\n          throw new TypeError(ERR_RHANDLER)\n\n        if ( typeOf(store.get(this).get(sroutes).get(path)) == \"array\" )\n          store.get(this).get(sroutes).get(path).push(handler)\n        else if ( Router.isRouteHandler(store.get(this).get(sroutes).get(path)) )\n          store.get(this).get(sroutes).set(path, [store.get(this).get(sroutes).get(path), handler])\n        else\n          store.get(this).get(sroutes).set(path, handler)\n\n        return 1\n    }\n\n    dispatchRoute(route, request){\n        route = route instanceof Route ? route : new Route(route, { request })\n\n        return new RouteDispatcher({ route, target: this })\n    }\n\n    removeRouteHandler(path = null, handler=Function.prototype){\n        if ( arguments.length > 1 && typeOf(path) == \"array\") {\n            let count = 0\n\n            for ( path of arguments[0] )\n              count += 1, this.addRouteHandler(path, handler)\n\n            return count\n        }\n\n        if ( typeOf(store.get(this).get(sroutes).get(path)) == \"array\" ) {\n            let count = 0\n            let idx = -1\n\n            while ( idx = store.get(this).get(sroutes).get(path).indexOf(handler), idx = -1 )\n              count += 1, store.get(this).get(sroutes).get(path).splice(idx, 1)\n\n            switch ( store.get(this).get(sroutes).get(path).length ) {\n                case 0:\n                  store.get(this).get(sroutes).delete(path)\n                  break\n                case 1:\n                  store.get(this).get(sroutes).set(path, store.get(this).get(sroutes).get(path)[0])\n                  break\n            }\n\n            return count\n        }\n\n        if ( store.get(this).get(sroutes).get(path) === handler ) {\n            store.get(this).get(sroutes).delete(path)\n            return 1\n        }\n\n        return 0\n    }\n\n}\n","\"use strict\"\n\nimport store from \"store\"\n\nexport default Class => {\n\n    const Singleton = function(){\n        return function(...args){\n            if ( store.has(Class) )\n              return store.get(Class)\n\n            const singleton = new Class(...args)\n            store.set(Class, singleton)\n            return singleton\n        }\n    }(Class)\n\n    void [\n        ...Object.getOwnPropertyNames(Class)\n      , ...Object.getOwnPropertySymbols(Class)\n    ].forEach(staticProperty => {\n      if (  (Object.getOwnPropertyDescriptor(Singleton, staticProperty)||{configurable:true}).configurable )\n        Object.defineProperty(Singleton, staticProperty, Object.getOwnPropertyDescriptor(Class, staticProperty))\n    })\n\n    return Singleton\n}\n","\"use strict\"\n\nimport Model from \"models/Model\"\nimport Node from \"nodes/Node\"\nimport Parser from \"views/ZParser\"\nimport store from \"store\"\nimport typeOf from \"utils/toType\"\nimport UID from \"uids/UID\"\n\nexport const sargs = new Object(Symbol(\"args\"))\nexport const sconstructor = new Object(Symbol(\"constructor\"))\nconst sexpression = new Object(Symbol(\"expression\"))\nconst sfragment = new Object(Symbol(\"fragment\"))\nconst sprops = new Object(Symbol(\"props\"))\nexport const ssubviewAsChild = new Object(Symbol(\"subview_as_child\"))\nconst stemplate = new Object(Symbol(\"template\"))\nconst suid = new Object(Symbol(\"uid\"))\nconst supdates = new Object(Symbol(\"updates\"))\n\nexport const xmap = new Map\n\nlet revocable = null\nconst noop = strictlySealed => () => !strictlySealed\nconst revocableNodeProxy = (view, target, path, opts = {}) => {\n    const traps = {\n        get: (target, key) => {\n            if ( Array.isArray(target[key]) ) {\n                if ( opts.all )\n                  return [...target[key]]\n                else\n                  return target[key][0]\n            }\n\n            return undefined\n        }\n    }\n\n    // TODO make the following compatible with proxy-polyfill\n    // traps.defineProperty = traps.deleteProperty =\n    // traps.preventExtensions = traps.set =\n    // noop(true)\n\n    const { revoke, proxy } = Proxy.revocable(target, traps)\n\n    if ( revocable )\n      revocable()\n    revocable = () => setTimeout(revoke, 4)\n\n    return proxy\n}\n\nconst revocablePropProxy = (view, target, path, opts = {}) => {\n    const traps = {\n        get: (target, key) => target[key]\n    }\n\n    // TODO make the following compatible with proxy-polyfill\n    // traps.defineProperty = traps.deleteProperty =\n    // traps.preventExtensions = traps.set =\n    // noop(true)\n\n    const { revoke, proxy } = Proxy.revocable(target, traps)\n\n    if ( revocable )\n      revocable()\n    revocable = () => setTimeout(revoke, 4)\n\n    return proxy\n}\n\nconst transformPath = path =>\n  path.reduce((acc, step) => {\n      if ( isNaN(parseFloat(step)) )\n        return acc += `.${step}`\n      else\n        return acc += `[\"${step}\"]`\n  }, \"\")\n\nexport const expression = (parts=[\"div\"], ...values) => {\n    parts = typeOf(parts) == \"array\" ? parts : [parts]\n\n    return parts.reduce((acc, current, i) => {\n        const value = i < values.length && (() => {\n            if ( !(values[i] instanceof Object) )\n              return\n        })()\n\n        acc += current\n\n        if ( i < values.length )\n          if ( !(values[i] instanceof Object) )\n            return acc += values[i]\n      // case: inherits from View\n          else if ( typeof values[i] == \"function\" &&\n               View.isPrototypeOf(values[i]) )\n            return acc += `|${Reflect.apply(View.toString, values[i], [])}|`\n      // case: describes a view and a set of args\n          else if ( Reflect.apply(Object.prototype.hasOwnProperty, values[i], [\"View\"])\n                    && Reflect.apply(Object.prototype.hasOwnProperty, values[i], [\"args\"]) )\n            return acc += `|${Reflect.apply(View.toString, values[i].View, [])}:${values[i].args}|`\n      // case: describes a model and a value path\n          else if ( Reflect.apply(Object.prototype.hasOwnProperty, values[i], [\"model\"])\n                    && Reflect.apply(Object.prototype.hasOwnProperty, values[i], [\"path\"]) )\n            return acc += `⌊${transformPath(values[i].path)}∈${values[i].model}⌉`\n      // default\n          else return acc += Reflect.apply(Object.prototype.toString, values[i], [])\n\n        return acc\n    }, \"\")\n}\n\nexport default class View extends Node {\n    static get expression(){ return expression }\n\n    static expressWith(...args){\n    // generate an entry\n        if ( !store.has(this) )\n          this.toString()\n\n        const uid = UID.uid()\n        store.get(this).get(sargs).set(uid, args)\n        return { View:this, args:uid}\n    }\n\n    static toString(){\n      if ( !store.has(this) )\n        store.set(this, new WeakMap),\n        store.get(this).set(suid, Symbol.for(UID.uid())),\n        store.get(this).set(sconstructor, this),\n        store.get(this).set(sargs, new Map)\n        xmap.set(store.get(this).get(suid), store.get(this))\n\n      return Symbol.keyFor(store.get(this).get(suid))\n    }\n\n    static get x(){ return expression }\n    static get xw(){  return this.expressWith }\n\n    constructor(...args){\n        super()\n\n        const conf = args[0] instanceof Object ? args[0] : {}\n        const {expression, props, subviewAsChild=true} = conf\n\n        store.get(this).set(sprops, {})\n        if ( props )\n          Object.keys(props).forEach(prop =>\n            store.get(this).get(sprops)[prop] = props[prop])\n        store.get(this).set(ssubviewAsChild, !!subviewAsChild)\n\n        store.get(this).set(sexpression,\n          Parser.parse(expression||this.template, this))\n\n        store.get(this).set(supdates, store.get(this).get(sexpression).updates\n          .reduce((acc, {updaters, handler}) => (updaters.forEach(updater => {\n              if ( !acc.has(updater) )\n                acc.set(updater, new Set)\n              acc.get(updater).add(handler)\n          }), acc), new Map))\n\n        store.get(this).get(supdates).forEach((handlers, updater) =>\n          updater.addEventListener(Model.events.modelchange, () =>\n              handlers.forEach(handler => handler()), true))\n    }\n\n    get fragment(){ return store.get(this).get(sexpression).fragment }\n    get node(){ return revocableNodeProxy(this, store.get(this).get(sexpression).refs, [], { all: false }) }\n    get nodes(){ return revocableNodeProxy(this, store.get(this).get(sexpression).refs, [], { all: true }) }\n    get props(){ return revocablePropProxy(this, store.get(this).get(sprops), []) }\n\n}\n","\"use strict\"\n\nimport Model from \"models/Model\"\nimport store from \"store\"\nimport View, { sargs, sconstructor, ssubviewAsChild, xmap } from \"views/View\"\n\nconst auto_vars = Object.seal([\"A\", \"INPUT\", \"SUBMIT\", \"BUTTON\"])\n\nconst CLASS_LIST_COMPAT = (Element.prototype.hasOwnProperty(\"classList\") || HTMLElement.prototype.hasOwnProperty(\"classList\")) && function(){\n    // to be compatible, browser must be able to use classlist on a svg element\n    try {\n        document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\").classList.add(\"x\")\n        return true\n    } catch(e){}\n    return false\n}()\n\n// const escapeDummy = document.createTextNode(\"\")\n// const escapeHTML = string => (escapeDummy.nodeValue = string, escapeDummy.nodeValue)\n\nconst evaluate = value => {\n    if ( typeof value !== \"string\" || value instanceof String )\n      return value\n    else if ( value === \"true\" )\n      return true\n    else if ( value === \"false\" )\n      return false\n    else if ( value.indexOf(\".\") == -1 ) {\n        const candidate = parseInt(value)\n        if ( !isNaN )\n          return candidate\n        return value\n    }\n    else if ( value.indexOf(\".\") != -1 ) {\n        const candidate = parseFloat(value)\n        if ( !isNaN )\n          return candidate\n        return value\n    }\n    else return value\n}\nconst setAttributeExceptions = [\"muted\", \"value\"]\n\nexport const namespaces = Object.seal({\n    html: \"http://www.w3.org/1999/xhtml\"\n  , svg: \"http://www.w3.org/2000/svg\"\n  , xml: \"http://www.w3.org/XML/1998/namespace\"\n  , xmlns: \"http://www.w3.org/2000/xmlns/\"\n  , xlink: \"http://www.w3.org/1999/xlink\"\n})\n\nconst sbuffer = new Object(Symbol(\"buffer\"))\nconst scontext = new Object(Symbol(\"context\"))\nconst sexpression = new Object(Symbol(\"expression\"))\nconst sfragment = new Object(Symbol(\"fragment\"))\nconst slength = new Object(Symbol(\"length\"))\nconst sowner = new Object(Symbol(\"owner\"))\nconst spile = new Object(Symbol(\"pile\"))\nconst spointer = new Object(Symbol(\"pointer\"))\nconst srefs = new Object(Symbol(\"refs\"))\nconst supdates = new Object(Symbol(\"updates\"))\nconst svars = new Object(Symbol(\"svars\"))\n\nconst rextractsvars = /(⌊([^∈]*∈[^∈]*)⌉)/\nconst rpathmodel = /(.*)∈(.*)/\nconst extractVars = input => {\n    const output  = []\n    const updaters = new Set\n\n    let hit\n    while ( hit = rextractsvars.exec(input) ) {\n        const [,match, data] = hit\n        const idx = input.indexOf(match)\n\n        if ( idx ) output.push(input.slice(0, idx))\n        input = input.slice(idx + match.length)\n\n        const [, path, ref] = rpathmodel.exec(data)\n        const model = Model.ref(ref)\n\n        if ( !model ) {\n            output.push(match)\n            continue\n        }\n\n        updaters.add(model)\n        output.push(function(path, model, match){\n            return function(){\n                try { return new Function(\"model\", \"path\", `\"use strict\"; return model.io${path}`)(model, path) }\n                catch(e){ return match }\n            }\n        }(path, model, match))\n    }\n\n    output.push(input)\n\n    const handler = function(input){\n        return function(){\n            return input.reduce((acc, curr) =>\n              acc += typeof curr == \"function\" ? curr() : curr\n              , \"\")\n        }\n    }(output)\n\n    return { updaters:updaters.size?[...updaters]:null, handler }\n}\n\nconst operators = new Map\n\noperators.set(\"@\", {\n    name: \"@\"\n  , handler(captured){\n        this.refs[captured] = this.refs[captured] || []\n        this.refs[captured].push(this.buffer)\n    }\n  , capture(){\n        do {\n            const { done, value } = this.lookAhead()\n\n            if ( done || Parser.traversals.has(value) || Parser.operators.has(value) )\n              break\n\n            this.pile += this.next().value\n        } while ( true )\n\n        const capture = this.pile.trim()\n        this.pile = \"\"\n\n        return [capture]\n    }\n})\n\noperators.set(\"[\", {\n    name: \"[\"\n  , handler(captured){\n        if ( this.buffer.nodeType != Node.ELEMENT_NODE )\n          return\n\n        const idx = captured.search(\"=\")\n        let attr = idx == -1 ? captured : captured.split(\"=\")[0]\n        let ns\n\n        if ( attr.indexOf(\":\") != -1 ) {\n            const split = attr.split(\":\")\n            attr = split[1]\n            ns = Parser.namespaces[split[0].toLowerCase()] || null\n        }\n\n        const { updaters, handler } = idx == -1\n          ? { handler(){ return true } }\n          : extractVars(captured.slice(idx+1))\n\n        const update = {\n            updaters\n          , handler: function(node, ns, attr, handler){\n                return function(){\n                    const value = evaluate(handler())\n\n                    if ( setAttributeExceptions.indexOf(attr) != -1 )\n                      node[attr] = value\n                    else if ( ns )\n                      node.setAttributeNS(ns, attr, value)\n                    else\n                      node.setAttribute(attr, value)\n                }\n            }(this.buffer, ns, attr, handler)\n        }\n\n        if ( updaters )\n          this.updates.push(update)\n        update.handler()\n    }\n  , capture(){\n        let bracket = false\n        do {\n            const { done, value } = this.lookAhead()\n\n            if ( done )\n              break\n\n            if ( !bracket && value === \"]\" ) {\n                this.next()\n                break\n            }\n\n            if ( value === \"⌊\" )\n              bracket = true\n            if ( value === \"⌉\" )\n              bracket = false\n\n            this.pile += this.next().value\n        } while ( true )\n\n        const capture = this.pile.trim()\n        return [capture]\n    }\n})\n\noperators.set(\"#\", {\n    name: \"#\"\n  , handler(captured){\n        if ( this.buffer.nodeType != Node.ELEMENT_NODE )\n          return\n\n        const { updaters, handler } = extractVars(captured)\n\n        const update = {\n            updaters\n          , handler: function(node, handler){\n                return function(){\n                    node.setAttribute(\"id\", handler())\n                }\n            }(this.buffer, handler)\n        }\n\n        if ( updaters )\n          this.updates.push(update)\n        update.handler()\n    }\n  , capture(){\n        let bracket = false\n        do {\n            const { done, value } = this.lookAhead()\n            if ( done )\n              break\n\n            if ( !bracket &&\n                 (Parser.traversals.has(value) || Parser.operators.has(value)) )\n              break\n\n            if ( value === \"⌊\" )\n              bracket = true\n            if ( value === \"⌉\" )\n              bracket = false\n\n            this.pile += this.next().value\n        } while ( true )\n\n        const capture = this.pile.trim()\n        this.pile = \"\"\n        return [capture]\n    }\n})\n\noperators.set(\".\", {\n    name: \".\"\n  , handler(captured){\n        if ( this.buffer.nodeType != Node.ELEMENT_NODE )\n          return\n\n        const { updaters, handler } = extractVars(captured)\n\n        const update = {\n            updaters\n          , handler: function(node, handler){\n                const was = []\n\n                return function(){\n                    const requested = handler().split(\" \")\n                    const remove = !was.length ? []\n                      : was.reduce((acc, classname) =>\n                        (requested.indexOf(classname) == -1 && acc.push(classname), acc),[])\n                    const add = !was.length ? requested\n                      : requested.reduce((acc, classname) =>\n                        (was.indexOf(classname) == -1 && acc.push(classname), acc), [])\n\n                    if ( CLASS_LIST_COMPAT ) {\n                        remove.forEach(classname => node.classList.remove(classname))\n                        add.forEach(classname => node.classList.add(classname))\n                    } else {\n                        node.setAttribute(\"class\", (node.getAttribute(\"class\") || \"\").split(\" \")\n                          .filter(classname => remove.indexOf(classname) !== -1)\n                          .concat(add)\n                          .join(\" \"))\n                    }\n                    was.splice(0, was.length, ...requested)\n                }\n            }(this.buffer, handler)\n        }\n\n        if ( updaters )\n          this.updates.push(update)\n        update.handler()\n    }\n  , capture(){\n        let bracket = false\n        do {\n            const { done, value } = this.lookAhead()\n\n            if ( done )\n              break\n\n            if ( !bracket )\n              if ( Parser.traversals.has(value) || Parser.operators.has(value) )\n                break\n\n            if ( value === \"⌊\" )\n              bracket = true\n            if ( value === \"⌉\" )\n              bracket = false\n\n            this.pile += this.next().value\n        } while ( true )\n\n        const capture = this.pile.trim()\n        this.pile = \"\"\n        return [capture]\n    }\n})\n\noperators.set(\"{\", {\n    name: \"{\"\n  , handler(captured, { safe=true } = {}){\n        const node = !safe || this.buffer.nodeType === Node.TEXT_NODE\n                   ? this.buffer\n                   : this.buffer.appendChild(document.createTextNode(\"\"))\n        const { updaters, handler } = extractVars(captured)\n        const update = {\n            updaters\n          , handler: safe\n              ? function(node, handler){\n                    return function(){ node.nodeValue = handler() }\n                }(node, handler)\n              : function(node, handler){\n                    let was = \"\"\n                    return function(){\n                        const textNodes = Reflect.apply(Array.prototype.slice, node.childNodes, [])\n                          .filter(node => node.nodeType === Node.TEXT_NODE)\n\n                        if ( textNodes.length )\n                          console.warn(\"unsafe variable will provoke a node.normalize()\")\n\n                        const onnode = node.textContent\n                        const position = !onnode.length ? 0\n                                       : was.length ? onnode.length\n                                       : onnode.indexOf(was)\n\n                        const change = handler()\n                        const to = [...onnode]\n                        to.splice(position, was.length, ...change)\n\n                        node.innerHTML = to.join(\"\")\n                    }\n                }(node, handler)\n        }\n\n        if ( updaters )\n          this.updates.push(update)\n        update.handler()\n    }\n  , capture(){\n        const safe = this.lookAhead().value === \"{\" ? (this.next(), false) : true\n\n        let remains = safe ? 1 : 2\n        let ignore = 0\n\n        do {\n            const { done, value } = this.lookAhead()\n\n            if ( done )\n              break\n\n            if ( value !== \"}\" ) {\n                const { done, value } = this.next()\n\n                if ( value == \"{\" )\n                  ignore +1\n\n                if ( !done )\n                  this.pile += value\n            }\n            else if ( ignore ) {\n                ignore -= 1\n\n                if ( ignore) {\n                    const { done, value } = this.next()\n\n                    if ( !done )\n                      this.pile += value\n                }\n\n                if ( remains ) {\n                    remains -= 1\n\n                    if ( remains )\n                      this.next()\n                    else\n                      break\n                }\n            }\n            else {\n                remains -= 1\n                this.next()\n\n                if ( !remains )\n                  break\n            }\n        } while (true)\n\n        const capture = this.pile //don't trim\n        this.pile = \"\"\n        return [capture, {safe}]\n    }\n})\n\noperators.set(\"(\", {\n    name: \"(\"\n  , handler(capture){\n        if ( Parser.debug )\n          console.log(`OP ( => captured: ${capture}`)\n        const { fragment, refs, updates } = Parser.parse(capture)\n\n        Object.keys(refs)\n        .filter(ref => ref !== \"root\")\n        .forEach(ref => this.refs[ref] = this.refs[ref]\n                      ? [...this.refs[ref], ...refs[ref]]\n                      : [...refs[ref]])\n\n        this.updates = [...this.updates, ...updates]\n        this.buffer = fragment\n\n    }\n  , capture(){\n        let ignore = 0\n\n        do {\n            const { done, value } = this.lookAhead()\n\n            if ( done )\n              break\n\n            if ( value !== \")\") {\n                const { done, value } = this.next()\n\n                if ( value == \"(\" )\n                  ignore += 1\n\n                if (!done )\n                  this.pile += value\n            } else {\n                if ( ignore ) {\n                    ignore -= 1\n\n                    const { done, value } = this.next()\n\n                    if (!done )\n                      this.pile += value\n                }\n                else {\n                    this.next()\n                    break\n                }\n            }\n\n        } while (true)\n\n        const capture = this.pile\n        this.pile = \"\"\n        return [capture]\n    }\n})\n\noperators.set(\"|\", {\n    name: \"|\"\n  , handler(capture){\n        if ( Parser.debug )\n          console.log(`OP |, capture: ${capture} => ${xmap.get(Symbol.for(capture))}`)\n\n        const idx = capture.search(\":\")\n        const symbol = Symbol.for(idx == -1 ? capture : capture.split(\":\")[0])\n        const Constructor = xmap.get(symbol).get(sconstructor)\n        const args = idx == -1 ? [] : xmap.get(symbol).get(sargs).get(capture.slice(idx+1))\n        const instance = new Constructor(...args)\n\n        instance.nodes.root.forEach(node => this.context.appendChild(node))\n        this.buffer = instance.nodes.root[instance.nodes.root.length-1]\n\n        if ( this.owner instanceof View &&\n          store.get(this.owner).get(ssubviewAsChild) )\n            this.owner.appendChild(instance)\n    }\n  , capture(){\n        do {\n            const { done, value } = this.lookAhead()\n\n            if ( done )\n              break\n\n            if ( value !== \"|\") {\n                const { done, value } = this.next()\n\n                if (!done )\n                  this.pile += value\n            } else {\n                this.next()\n                break\n            }\n\n        } while (true)\n\n        const capture = this.pile\n        this.pile = \"\"\n        return [capture]\n    }\n})\n\nconst traversals = new Map\n\ntraversals.set(\">\", {\n    name: \"child\"\n  , handler(){\n        if ( Parser.debug )\n          console.log(\"OP >, buffer\", this.buffer, \"context\", this.context)\n        this.context.appendChild(this.buffer)\n        this.context = this.buffer\n\n        this.buffer = null\n    }\n})\n\ntraversals.set(\"+\", {\n    name: \"siblings\"\n  , handler(){\n        this.context.appendChild(this.buffer)\n\n        this.buffer = null\n    }\n})\n\nlet debug = false\nexport default class Parser {\n    static get auto_vars(){ return auto_vars }\n    static get debug(){ return debug }\n    static set debug(bool){ debug = !!bool }\n    static get namespaces(){ return namespaces }\n    static get operators(){ return operators }\n    static get traversals(){ return traversals }\n\n    // static escapeHTML(string){\n    //     escapeDummy.nodeValue = string\n    //     return escapeDummy.nodeValue\n    // }\n\n    static parse(expression, owner){\n        return new Parser().parse(expression, owner)\n    }\n\n    constructor(){\n        store.set(this, new WeakMap)\n    }\n\n    get buffer(){ return store.get(this).get(sbuffer) }\n    set buffer(any){ store.get(this).set(sbuffer, any) }\n\n    get context(){ return store.get(this).get(scontext) }\n    set context(node){ store.get(this).set(scontext, node) }\n\n    get done(){ return this.pointer >= this.length }\n\n    get expression(){ return store.get(this).get(sexpression) }\n    set expression(string){ store.get(this).set(sexpression, string) }\n\n    get fragment(){ return store.get(this).get(sfragment) }\n    set fragment(fragment){ store.get(this).set(sfragment, fragment)  }\n\n    get glyph(){\n        if ( Parser.debug )\n          console.log(`glyph => ${this.expression[this.pointer]} (pointer:${this.pointer}/length:${this.length} done:${this.done})`)\n        return this.expression[this.pointer]\n    }\n\n    get length(){ return store.get(this).get(slength) }\n    set length(int){ return store.get(this).set(slength, int|0) }\n\n    get owner(){ return store.get(this).get(sowner) }\n    set owner(any){ store.get(this).set(sowner, any) }\n\n    get pile(){ return store.get(this).get(spile) }\n    set pile(string){ store.get(this).set(spile, string) }\n\n    get pointer(){ return store.get(this).get(spointer) }\n    set pointer(uint){ store.get(this).set(spointer, uint|0) }\n\n    get refs(){ return store.get(this).get(srefs) }\n    set refs(object){ store.get(this).set(srefs, object) }\n\n    get updates(){ return store.get(this).get(supdates) }\n    set updates(set){ store.get(this).set(supdates, set) }\n\n    get vars(){ return store.get(this).get(svars) }\n    set vars(set){ store.get(this).set(svars, set) }\n\n    lookAhead(){\n        return {\n            done: this.pointer+1 >= this.length\n          , value: this.expression[this.pointer+1]\n        }\n    }\n\n    next(){\n        this.pointer += 1\n        return { value: this.glyph, done: this.done }\n    }\n\n    operate(operator){\n        Reflect.apply(Parser.operator.get(operator), this, [])\n    }\n\n    parse(expression=\"\", owner){\n        if ( Parser.debug )\n          console.log(`parse(${expression})`)\n        this.expression = [...expression]\n        this.fragment = document.createDocumentFragment()\n        this.context = this.fragment\n        this.length = this.expression.length\n        this.owner = owner\n        this.pile = \"\"\n        this.pointer = 0\n        this.refs = {}\n        this.updates = []\n        this.vars = new Set\n\n        do {\n            if ( Parser.traversals.has(this.glyph) ) {\n              const {handler} = Parser.traversals.get(this.glyph)\n              this.unpile()\n              Reflect.apply(handler, this, [])\n            }\n            else if ( Parser.operators.has(this.glyph) ) {\n                const {capture, handler, name} = Parser.operators.get(this.glyph)\n                this.unpile({handler, name})\n                Reflect.apply(handler, this, Reflect.apply(capture, this, []))\n            }\n            else\n              this.pile += this.glyph\n        } while ( !this.next().done  )\n\n    // empty pile\n        if ( this.pile.length )\n          this.unpile()\n    // last traversal\n        Reflect.apply(Parser.traversals.get(\">\").handler, this, [])\n\n        return this\n    }\n\n    unpile({handler, name}={}){\n        this.pile = this.pile.trim()\n\n        if (!this.buffer) {\n            if ( !this.pile.length )\n              this.buffer = document.createElement(\"div\")\n\n            else if ( this.pile === \"§\" )\n              this.buffer = document.createTextNode(\"div\")\n\n            else if ( this.pile.indexOf(\":\") != -1 ) {\n                const split = this.pile.split(\":\")\n                this.buffer = document.createElementNS( Parser.namespaces[split[0].toLowerCase()]||Parser.namespaces.html, split[1])\n            }\n\n            else\n              this.buffer = document.createElement(this.pile)\n\n            if ( Parser.auto_vars.indexOf(this.buffer.nodeName) != -1 )\n              Reflect.apply(operators.get(\"@\").handler, this, [this.buffer.nodeName])\n\n        // node is root ( direct childNode of fragment )\n            if ( this.context === this.fragment )\n              Reflect.apply(operators.get(\"@\").handler, this, [\"root\"])\n        }\n\n        this.pile = \"\"\n    }\n}\n","\"use strict\"\nimport { ERR_SS_NOT_WRITABLE } from \"errors\"\nimport CSSConditionalRule from \"css/CSSConditionalRule\"\nimport CSSRule from \"css/CSSRule\"\nimport domready from \"utils/domready\"\nimport Event from \"events/Event\"\nimport isSameDomain from \"utils/isSameDomain\"\nimport Node from \"nodes/Node\"\nimport store from \"store\"\nimport typeOf from \"utils/toType\"\nimport UID from \"uids/UID\"\nimport ZParser from \"views/ZParser\"\n\nimport { sadd, sremove } from \"css/CSSConditionalRule\"\nconst suid = new Object(Symbol())\nconst snode = new Object(Symbol())\nconst sready = new Object(Symbol())\nconst srules = new Object(Symbol())\nconst ssheet = new Object(Symbol())\nconst swritable = new Object(Symbol())\n\nconst updaters_text = new WeakMap\n\nexport class Ready extends Event {\n    static get TYPE(){ return \"ready\" }\n\n    constructor(sheet){\n        super(Ready.TYPE)\n        store.get(this).set(ssheet, sheet)\n    }\n\n    get sheet(){ return store.get(this).get(ssheet) }\n}\n\nexport default class Stylesheet extends Node {\n    static get isLocalFile(){ return isSameDomain }\n\n    constructor(...args){\n        super()\n\n        const rules = typeOf(args[args.length-1]) == \"array\" ? [].concat(args.pop()) : []\n        const dict = typeOf(args[args.length-1]) == \"object\" ? args.pop() : { node: args.pop() }\n        args =  null\n\n        store.get(this).set(suid, typeOf(dict.id) == \"string\" ? dict.id : UID.uid())\n        store.get(this).set(swritable, true)\n        store.get(this).set(srules, [])\n\n        store.get(this).set(snode, function(node){\n            if ( node && node.nodeType === window.Node.ELEMENT_NODE && [\"STYLE\", \"LINK\"].includes(node.nodeName) )\n              return node\n\n            if ( typeOf(node) == \"string\" ) {\n                if ( !Stylesheet.isLocalFile(node) )\n                  store.get(this).set(swritable, false)\n                const href = node\n                node = ZParser.parse(`link#${store.get(this).get(suid)}[rel=stylesheet][href=${href}]`).fragment.childNodes[0]\n            }\n            else {\n                node = ZParser.parse(`style#${store.get(this).get(suid)}`).fragment.childNodes[0]\n                node.appendChild( document.createTextNode( rules.splice(0).join(\"\\n\") ) )\n            }\n\n            if ( dict.media )\n              node.setAttribute(\"media\", dict.media)\n\n            domready.then(({nodes}) => {\n                nodes.head.appendChild(node)\n\n                requestAnimationFrame(hrt=>{\n                    if ( !!dict.disabled )\n                      node.disabled = true\n                })\n            })\n\n            return node\n        }.call(this, dict.node||dict.href||void 0))\n\n        store.get(this).set(sready, new Promise((resolve, reject) => {\n            const onload = e => {\n                if ( store.get(this).get(swritable) && rules && !!rules.length )\n                  this.insertRule(rules)\n\n                resolve(store.get(this).get(swritable))\n                store.get(this).set(ssheet, store.get(this).get(snode).sheet)\n                this.dispatchEvent(new Ready(store.get(this).get(\"sheet\")))\n            }\n\n            if ( \"msSetImmediate\" in window ) // no events for <style> on ie\n              msSetImmediate(onload) //TODO test on edge\n            else\n              store.get(this).get(snode).addEventListener(\"load\", onload),\n              store.get(this).get(snode).addEventListener(\"error\", function(e){\n                  console.error(e)\n                  reject(e)\n              })\n        }))\n    }\n\n    get media(){ return store.get(this).get(snode).getAttribute(\"media\") }\n    set media(v){ store.get(this).get(snode).setAttribute(\"media\", v) }\n    get node(){ return store.get(this).get(snode) }\n    get sheet(){ return store.get(this).get(snode).sheet }\n\n    async deleteRule(...args){\n        const rules = typeOf(args[0]) == \"array\" ? args.shift()\n                    : args.length ? args\n                    : []\n\n        const writable = await store.get(this).get(sready)\n\n        rules.forEach(rule => {\n            let is_rule = false\n            let is_conditional = false\n\n            rule = rule instanceof CSSRule ? (is_rule = true, rule)\n                 : rule instanceof CSSConditionalRule ? (is_conditional = true, rule)\n                 : null\n\n            if ( !rule )\n              return\n\n            if ( is_rule ) {\n                if ( updaters_text.has(rule) )\n                  rule.removeEventListener(CSSRule.events.textupdate, updaters_text.get(rule)),\n                  updaters_text.delete(rule)\n\n                  let idx = -1\n                  while ( idx = store.get(this).get(srules).indexOf(rule), idx != -1 )\n                    store.get(this).get(ssheet).deleteRule(idx),\n                    store.get(this).get(srules).splice(idx, 1)\n\n\n            }\n            else if ( is_conditional ){\n                let idx = -1\n                while ( idx = store.get(this).get(srules).indexOf(rule), idx != -1 ) {\n                    store.get(rule).get(sremove)( store.get(this).get(ssheet).cssRules[idx] )\n                    store.get(this).get(ssheet).deleteRule(idx)\n                    store.get(this).get(srules).splice(idx, 1)\n                }\n\n            }\n        })\n    }\n\n    async insertRule(...args){\n        const rules = typeOf(args[0]) == \"array\" ? args.shift()\n                    : args.length ? args\n                    : []\n\n        const writable = await store.get(this).get(sready)\n\n        if ( !writable )\n          throw new Error(ERR_SS_NOT_WRITABLE)\n\n        rules.forEach(rule => {\n            let is_rule = false\n            let is_conditional = false\n\n            rule = rule instanceof CSSRule ? (is_rule = true, rule)\n                 : rule instanceof CSSConditionalRule ? (is_conditional = true, rule)\n                 : (is_rule = true, new CSSRule(rule))\n\n            const idx = store.get(this).get(ssheet).cssRules.length\n            store.get(this).get(srules)[idx] = rule\n\n            if ( is_rule ) {\n               store.get(this).get(ssheet).insertRule(rule.toString(), idx)\n\n               if ( !updaters_text.has(rule) )\n                 updaters_text.set(rule, ({cssRule}) => {\n                     let idxs = []\n                     store.get(this).get(srules).forEach((rule, idx) => {\n                         if ( rule === cssRule ) idxs.push(idx)\n                     })\n                     idxs.forEach(idx => store.get(this).get(ssheet).cssRules[idx].style.cssText = cssRule.cssText)\n                 })\n\n               rule.addEventListener(CSSRule.events.textupdate, updaters_text.get(rule))\n            }\n            else if ( is_conditional ){\n               store.get(this).get(ssheet).insertRule(rule.toString(), idx)\n               store.get(rule).get(sadd)( store.get(this).get(ssheet).cssRules[idx] )\n            }\n        })\n    }\n}\n","\"use strict\"\n\n//TODO strenghten\n\nexport const sparents = Symbol(\"parents\")\n\nexport default (...classes) => {\n    const Class = class extends classes.pop() {}\n\n    const prototypes = classes.reduce((accumulator, Class) => {\n        const prototypes = [Class.prototype]\n\n        while ( Class = Object.getPrototypeOf(Class), Class != Function.prototype )\n          prototypes.unshift(Class.prototype)\n\n        prototypes.forEach(prototype => accumulator.add(prototype))\n        return accumulator\n    }, new Set)\n\n    prototypes.forEach(prototype =>\n      [...Object.getOwnPropertyNames(prototype), ...Object.getOwnPropertySymbols(prototype)]\n        .forEach(property =>\n            Object.defineProperty(Class.prototype, property, Object.getOwnPropertyDescriptor(prototype, property))))\n\n    Object.defineProperty(Class.prototype, \"constructor\", { configurable:true, value: Class })\n\n    return Class\n}\n","\"use strict\"\r\n\r\nimport { ENOTGRAPH, ENOTVERTEX, EUNCOMPEDGE } from \"errors\"\r\nimport Edge from \"graph/Edge\"\r\nimport EventTarget from \"events/EventTarget\"\r\nimport Graph from \"graph/Graph\"\r\nimport store from \"store\"\r\n\r\nimport { sedges } from \"graph/Edge\"\r\nimport { sgraphs } from \"graph/Graph\"\r\nexport const slabel = new Object(Symbol(\"label\"))\r\n\r\nexport default class Vertex extends EventTarget {\r\n    constructor(label){\r\n        super()\r\n        store.set(this, new WeakMap)\r\n        store.get(this).set(sedges, new Set)\r\n        store.get(this).set(sgraphs, new Set)\r\n        this.label = label\r\n    }\r\n\r\n    get graphs(){ return [...store.get(this).get(sgraphs)] }\r\n\r\n    get label(){ return store.get(this).get(slbabel) || null }\r\n    set label(label=null){ store.get(this).set(slabel, label) }\r\n\r\n    addEdge(graph, edge) { // shortcut to graph method\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n        return graph.addEdge(edge)\r\n    }\r\n\r\n    addEdges(graph, edges){ // shortcut to graph method\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n        return graph.addEdges(edges)\r\n    }\r\n\r\n    adjacents(graph){\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n\r\n        return graph.adjacents(this)\r\n    }\r\n\r\n    adjacentsIn(graph){\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n\r\n        return graph.adjacentsIn(this)\r\n    }\r\n\r\n    adjacentsOut(graph){\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n\r\n        return graph.adjacentsOut(this)\r\n    }\r\n\r\n    arcFrom(graph, vertex){\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n\r\n        return graph.arcFrom(vertex, this)\r\n    }\r\n\r\n    // number of edges not regions in graph\r\n    arcs(graph){\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n\r\n        return graph.arcs.filter(({vertices}) => vertices.includes(this))\r\n    }\r\n\r\n    arcTo(graph, vertex){\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n\r\n        return graph.arcTo(vertex, this)\r\n    }\r\n\r\n    // number of edges not regions in graph\r\n    connections(graph){\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n\r\n        return graph.connections.filter(({vertices}) => vertices.includes(this))\r\n    }\r\n\r\n    // the number of edges\r\n    degree(graph){\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n\r\n        return graph.degree(this)\r\n    }\r\n\r\n    // list edges related to current vertex in the given graph\r\n    edges(graph){\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n        return graph.edges.filter(edge => edge.vertices.includes(this))\r\n    }\r\n\r\n    extravertArcWith(graph, vertex){\r\n      if ( !(graph instanceof Graph) )\r\n        throw new TypeError(ENOTGRAPH)\r\n\r\n      return graph.extravertArcWith(vertex, this)\r\n    }\r\n\r\n    hyperEdges(graph){\r\n      if ( !(graph instanceof Graph) )\r\n        throw new TypeError(ENOTGRAPH)\r\n      return graph.hyperarcs.filter(edge => edge.vertices.includes(this))\r\n    }\r\n\r\n    hyperEdgeWith(graph, vertices){\r\n      if ( !(graph instanceof Graph) )\r\n        throw new TypeError(ENOTGRAPH)\r\n\r\n      return graph.hyperEdgeWith([this, ...vertices])\r\n    }\r\n\r\n    // inward edges ( vertex <= x ) in the given graph\r\n    indegree(graph){\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n        return graph.indegree(this)\r\n        //return graph.edges.filter(edge => edge.in && edge.in.includes(this))\r\n    }\r\n\r\n    introvertArcWith(graph, vertex){\r\n      if ( !(graph instanceof Graph) )\r\n        throw new TypeError(ENOTGRAPH)\r\n      if ( !(vertex instanceof Vertex) )\r\n        throw new TypeError(ENOTVERTEX)\r\n\r\n      return graph.addEdge(new Edge([this, vertex], \"<>\"))\r\n    }\r\n\r\n    lines(graph){\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n        return graph.lines.filter(edge => edge.vertices.includes(this))\r\n    }\r\n\r\n    lineWith(graph, vertex){\r\n      if ( !(graph instanceof Graph) )\r\n        throw new TypeError(ENOTGRAPH)\r\n\r\n      return graph.lineWith(vertex, this)\r\n    }\r\n\r\n    loop(graph, relation){\r\n      if ( !(graph instanceof Graph) )\r\n        throw new TypeError(ENOTGRAPH)\r\n\r\n      return graph.loop(this, relation)\r\n    }\r\n\r\n    loops(graph){\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n\r\n        return graph.loops.filter(({ a }) => a === this)\r\n    }\r\n\r\n    // outward edges ( vertex => x ) in the given graph\r\n    outdegree(graph){\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n        return graph.outdegree(this)\r\n        //return graph.edges.filter(edge => edge.out && edge.out.includes(this))\r\n    }\r\n\r\n    removeEdge(graph, edge){ // shortcut to graph method\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n        return graph.removeEdge(edge)\r\n    }\r\n\r\n    removeEdges(graph, edges){ // shortcut to graph method\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n        return graph.removeEdges(edges)\r\n    }\r\n}\r\n","\"use strict\"\r\n\r\nimport { ENOTVERTEX, EUNKNWNREL } from \"errors\"\r\nimport EventTarget from \"events/EventTarget\"\r\nimport store from \"store\"\r\nimport Vertex from \"graph/Vertex\"\r\n\r\nexport const sdirection = new Object(Symbol())\r\nexport const sedges = new Object(Symbol())\r\nexport const sextraverted = new Object(Symbol())\r\nexport const sgraph = new Object(Symbol)\r\nexport const slabel = new Object(Symbol())\r\nexport const srelation = new Object(Symbol())\r\nexport const svertexa = new Object(Symbol())\r\nexport const svertexb = new Object(Symbol())\r\nexport const svertices = new Object(Symbol())\r\n\r\nconst relations = Object.freeze({\r\n    \"-\"   : 0b1 // A - B\r\n  , LINE  : 0b1\r\n  , \"<\"   : 0b10 // A <- B\r\n  , INOUT : 0b10\r\n  , \"<>\"  : 0b100 // A <-> B\r\n  , ININ  : 0b100\r\n  , \">\"   : 0b1000 // A -> B\r\n  , OUTIN : 0b1000\r\n  , \"><\"  : 0b10000 // A >-< B\r\n  , OUTOUT: 0b10000\r\n  , \"@\"   : 0b100000 // < A, B, C,... >\r\n  , REGION: 0b100000\r\n  , HYPERARC: 0b100000\r\n})\r\n\r\nconst states = Object.freeze({\r\n    CONNECTED: 0b1\r\n  , DISCONNECTED: 0b0\r\n})\r\n\r\nconst types = Object.freeze({\r\n    LINE    : 0b1 // 2 vertices and no direction\r\n  , ARC     : 0b10 // 2 vertices and 1-2 direction\r\n  , HYPERARC: 0b100 // more than 2 vertices\r\n  , REGION  : 0b100 // more than 2 vertices\r\n  , LOOP    : 0b1000 // 1 vertice\r\n})\r\n\r\nexport default class Edge extends EventTarget {\r\n    static get relations(){ return relations }\r\n    static get states(){ return states }\r\n    static get types(){ return types }\r\n\r\n    constructor(vertices, relation, label){\r\n        super()\r\n        store.set(this, new WeakMap)\r\n        store.get(this).set(svertices, new Set)\r\n\r\n        this.relation = relation\r\n        this.label = label\r\n\r\n        const [a, b, ...otherVertices] = [...vertices]\r\n        if ( a )\r\n          this.addVertex(a)\r\n        if ( b )\r\n          this.addVertex(b)\r\n        if ( otherVertices.length )\r\n          this.addVertices(otherVertices)\r\n    }\r\n\r\n    get a(){ return this.vertices[0] || null }\r\n    get b(){ return this.vertices[1] || this.vertices[0] || null }\r\n\r\n    get bidirected(){ return Boolean(this.relation & ( Edge.relations.OUTOUT|Edge.relations.ININ )) }\r\n\r\n    get directed(){ return Boolean(this.relation & ( Edge.relations.INOUT|Edge.relations.OUTIN )) }\r\n\r\n    get extraverted(){ return Boolean(this.relation & Edge.relations.ININ) }\r\n\r\n    get graph(){ return store.get(this).get(sgraph) || null }\r\n\r\n    get in(){\r\n        if ( this.relation & Edge.relations.ININ )\r\n          return [...new Set([this.a, this.b])]\r\n        else if ( this.relation & Edge.relations.INOUT )\r\n          return [this.a]\r\n        else if ( this.relation & Edge.relations.OUTIN )\r\n          return [this.b]\r\n        return null\r\n    }\r\n    get inward(){ return this.in }\r\n\r\n    get intraverted(){ return Boolean(this.relation & Edge.relations.ININ) }\r\n\r\n    get label(){ return store.get(this).get(slabel) || null }\r\n    set label(label=null){ store.get(this).set(slabel, label) }\r\n\r\n    get out(){\r\n        if ( this.relation & Edge.relations.OUTOUT )\r\n          return [...new Set([this.a, this.b])]\r\n        else if ( this.relation & Edge.relations.OUTIN )\r\n          return [this.a]\r\n        else if ( this.relation & Edge.relations.INOUT )\r\n          return [this.b]\r\n        return null\r\n    }\r\n    get outward(){ return this.out }\r\n\r\n    get relation(){ return store.get(this).get(srelation) }\r\n    set relation(rel=\"LINE\"){\r\n        if ( !Edge.relations.hasOwnProperty(rel) )\r\n          throw new ReferenceError(EUNKNWNREL)\r\n        store.get(this).set(srelation, Edge.relations[rel])\r\n    }\r\n\r\n    get state(){ return store.get(this).get(sgraph) ? Edge.states.CONNECTED : Edge.states.DISCONNECTED }\r\n\r\n    get type(){\r\n        if ( this.relation & Edge.relations.LINE )\r\n          return this.a === this.b ? Edge.types.LOOP : Edge.types.LINE\r\n        else if ( this.relation & (Edge.relations.INOUT|Edge.relations.OUTIN|Edge.relations.ININ|Edge.relations.OUTOUT) )\r\n          return this.a === this.b ? Edge.types.LOOP : Edge.types.ARC\r\n        else if ( this.relation & Edge.relations.REGION )\r\n          return Edge.types.HYPERARC\r\n    }\r\n\r\n    get undirected(){ return !this.directed && !this.bidirected }\r\n\r\n    get vertices(){ return [...store.get(this).get(svertices)] }\r\n\r\n    addVertex(vertex){\r\n        if ( !(vertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        const l = this.vertices.length\r\n        if ( l >= 2 && this.relation !== Edge.relations.REGION )\r\n          throw new Error(ETOOMANYVERT)\r\n\r\n        store.get(this).get(svertices).add(vertex)\r\n        store.get(vertex).get(sedges).add(this)\r\n        return vertex\r\n    }\r\n\r\n    addVertices(vertices){ return [...vertices].map(vertex => this.addVertex(vertex)) }\r\n\r\n    removeVertex(vertex){\r\n        if ( !(vertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        store.get(this).get(svertices).delete(vertex)\r\n        store.get(vertex).get(sedges).delete(this)\r\n        return vertex\r\n    }\r\n\r\n    removeVertices(vertices){ return [...vertices].map(vertex => this.removeVertex(vertex)) }\r\n}\r\n","\"use strict\"\r\n\r\nimport { EINVALIDCONS, ENOTGRAPH, ENOTVERTEX } from \"errors\"\r\nimport Graph from \"graph/Graph\"\r\nimport store from \"store\"\r\nimport typeOf from \"utils/toType\"\r\nimport Vertex from \"graph/Vertex\"\r\n\r\nexport const sgraph = new Object(Symbol())\r\nexport const sroot = new Object(Symbol())\r\nexport const straversal = new Object(Symbol())\r\n\r\nexport default class DepthFirstTree {\r\n    static from({ graph, rootVertex, traversal }){\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n        if ( !(rootVertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        const dft = Object.create({})\r\n        Object.setPrototypeOf(dft, DepthFirstTree.prototype)\r\n        store.set(dft, new WeakMap)\r\n        store.get(dft).set(sgraph, graph)\r\n        store.get(dft).set(sroot, rootVertex)\r\n        store.get(dft).set(straversal, traversal)\r\n\r\n        return dft\r\n    }\r\n\r\n    constructor(){ throw new Error(EINVALIDCONS) }\r\n\r\n    get root(){ return store.get(this).get(sroot) }\r\n\r\n    hasPathTo(vertex){\r\n        if ( !(vertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        return store.get(this).get(straversal).has(vertex)\r\n    }\r\n}\r\n","\"use strict\"\r\n\r\nimport { ENOTGRAPH, ENOTVERTEX } from \"errors\"\r\n\r\nimport BreadthFirstTree from \"graph/BreadthFirstTree\"\r\nimport DepthFirstTree from \"graph/DepthFirstTree\"\r\nimport EventTarget from \"events/EventTarget\"\r\nimport Graph from \"graph/Graph\"\r\nimport store from \"store\"\r\nimport Vertex from \"graph/Vertex\"\r\n\r\nexport const sgraph = new Object(Symbol())\r\n\r\nexport default class Traversal extends EventTarget {\r\n\r\n    constructor(graph){\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n\r\n        super()\r\n        store.set(this, new WeakMap)\r\n        store.get(this).set(sgraph, graph)\r\n    }\r\n\r\n    get bft(){ return this.breadthFirstTree }\r\n\r\n    get graph(){ return store.get(this).get(sgraph) }\r\n\r\n    depthFirstTree(rootVertex){\r\n        if ( !(rootVertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        const traversal = new WeakMap\r\n        const stack = [[null, rootVertex]]\r\n\r\n        while ( stack.length ) {\r\n            const [parent, vertex] = stack[stack.length-1]\r\n\r\n            traversal.set(vertex, parent)\r\n\r\n            const nextVertex = [\r\n                ...this.graph.lines.reduce((acc, {a, b, vertices}) => (vertices.includes(vertex) && acc.push(a===vertex?b:a), acc), [])\r\n              , ...this.graph.adjacentsOut(vertex)\r\n            ]\r\n            .filter(child => !traversal.has(child))\r\n            [0]\r\n\r\n            if ( !nextVertex ) stack.pop()\r\n            else stack.push([vertex, nextVertex])\r\n        }\r\n\r\n        return DepthFirstTree.from({ graph:this.graph, rootVertex, traversal })\r\n    }\r\n\r\n    breadthFirstTree(rootVertex){\r\n        if ( !(rootVertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        const traversal = new WeakMap\r\n        const queue = [[null, rootVertex]]\r\n\r\n        while ( queue.length ) {\r\n            const [parent, vertex] = queue.shift()\r\n\r\n            if ( traversal.has(vertex) )\r\n              continue\r\n            traversal.set(vertex, parent)\r\n\r\n            // void [\r\n            //     ...this.graph.lines.reduce((acc, {a, b, vertices}) => (vertices.includes(vertex) && acc.push(a===vertex?b:a), acc), [])\r\n            //   , ...this.graph.adjacentsOut(vertex)\r\n            // ]\r\n            // .filter(child => !traversal.has(child))\r\n            // .forEach(child => queue.push([vertex, child]))\r\n\r\n            void [\r\n                ...this.graph.lines.filter(({vertices}) => vertices.includes(vertex))\r\n              , ...this.graph.arcs.filter(({vertices}) => vertices.includes(vertex))\r\n            ]\r\n            .sort((a, b) => (+a.label||0) - (+b.label||0))\r\n            .reduce((acc, {a,b}) =>  (acc.push(a===vertex?b:a), acc), [])\r\n            .forEach(child => queue.push([vertex, child]))\r\n        }\r\n\r\n        return BreadthFirstTree.from({ graph:this.graph, rootVertex, traversal })\r\n    }\r\n\r\n}\r\n","\"use strict\"\r\n\r\nimport { EALRDYCONN, ENOTEDGE, ENOTINSET, ENOTVERTEX, EPRLLLNOTALLOW, EUNCOMPEDGE, EUNKNWNREL } from \"errors\"\r\nimport Edge from \"graph/Edge\"\r\nimport EventTarget from \"events/EventTarget\"\r\nimport Vertex from \"graph/Vertex\"\r\nimport {sgraph} from \"graph/Edge\"\r\nimport store from \"store\"\r\nimport Traversal from \"graph/Traversal\"\r\n\r\nexport const sallowed = new Object(Symbol(\"allowed\"))\r\nexport const sedges = new Object(Symbol(\"edges\"))\r\nexport const sgraphs = new Object(Symbol(\"graphs\"))\r\nexport const svertices = new Object(Symbol(\"vertices\"))\r\n\r\nconst allowance = Object.freeze({\r\n    PARALLELS: 1024\r\n})\r\n\r\nconst presets = Object.freeze({\r\n    LINES: 0b0001\r\n  , UNDIRECTED: 0b0001\r\n  , ARCS: 0b0010\r\n  , DIRECTED: 0b0010\r\n  , CONNECTIONS: 0b1011\r\n  , ALL: 0b1111\r\n})\r\n\r\nexport default class Graph extends EventTarget {\r\n    static get allowance(){ return allowance }\r\n    static get presets(){ return presets }\r\n\r\n    constructor({ allows=3 } = {}){\r\n        super()\r\n        store.set(this, new WeakMap)\r\n\r\n        store.get(this).set(sallowed, allows)\r\n        store.get(this).set(sedges, new Set)\r\n        store.get(this).set(svertices, new Set)\r\n    }\r\n\r\n    get allowed(){ return store.get(this).get(\"sallowed\") }\r\n    get arcs(){ return this.edges.filter(edge => edge.type == Edge.types.ARC) }\r\n    get connections(){ return this.edges.filter(edge => edge.type & (Edge.types.LINE|Edge.types.ARC|Edge.types.LOOP)) }\r\n    get edges(){ return [...store.get(this).get(sedges)] }\r\n    get hyperarcs(){ return this.edges.filter(edge => edge.type == Edge.types.HYPERARC) }\r\n    get lines(){ return this.edges.filter(edge => edge.type == Edge.types.LINE) }\r\n    get loops(){ return this.edges.filter(edge => edge.type == Edge.types.LOOP) }\r\n    get regions(){ return this.hyperarcs }\r\n    get vertices(){ return [...store.get(this).get(svertices)] }\r\n\r\n    allows(type){ return Boolean(store.get(this).get(sallowed) & type) }\r\n\r\n    addEdge(edge){\r\n        if ( !(edge instanceof Edge) )\r\n          throw new TypeError(ENOTEDGE)\r\n\r\n        if ( edge.state == Edge.states.CONNECTED )\r\n          throw new Error(EALRDYCONN)\r\n\r\n        if ( !this.allows(edge.type) || edge.vertices.some(vertex => !store.get(this).get(svertices).has(vertex)))\r\n          throw new TypeError(EUNCOMPEDGE)\r\n\r\n        if ( edge.type !== Edge.types.HYPERARC && !this.allows(Graph.allowance.PARALLELS)\r\n        && ( edge.type !== Edge.types.LOOP && [...this.connections].filter(({ vertices }) => vertices.includes(edge.a) && vertices.includes(edge.b)).length\r\n        || edge.type === Edge.types.LOOP && [...this.loops].filter(({a}) => a == edge.a).length ))\r\n          throw new Error(EPRLLLNOTALLOW)\r\n\r\n        store.get(this).get(sedges).add(edge)\r\n        store.get(edge).set(sgraph, this)\r\n        return edge\r\n    }\r\n\r\n    addEdges(edges){ void [...edges].forEach(edge => this.addEdge(edge)) }\r\n\r\n    adjacents(vertex){\r\n        if ( !(vertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        if ( !store.get(this).get(svertices).has(vertex) )\r\n          throw new ReferenceError(ENOTINSET)\r\n\r\n        return [...this.connections.reduce((acc, {a, b}) => {\r\n            return b === vertex ? (acc.add(a), acc)\r\n                 : a === vertex ? (acc.add(b), acc)\r\n                 : acc\r\n        }, new Set)]\r\n    }\r\n\r\n    adjacentsIn(vertex){\r\n        if ( !(vertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        if ( !store.get(this).get(svertices).has(vertex) )\r\n          throw new ReferenceError(ENOTINSET)\r\n\r\n        return [...this.arcs.reduce((acc, {inward, outward, relation}) => {\r\n            if ( inward && inward.includes(vertex) )\r\n              relation !== Edge.relations.ININ ? outward && outward.forEach(outward => outward !== vertex && acc.add(outward))\r\n                                               : inward.forEach(inward => inward !== vertex && acc.add(inward))\r\n            return acc\r\n        }, new Set)]\r\n    }\r\n\r\n    adjacentsOut(vertex){\r\n        if ( !(vertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        if ( !store.get(this).get(svertices).has(vertex) )\r\n          throw new ReferenceError(ENOTINSET)\r\n\r\n        return [...this.arcs.reduce((acc, {inward, outward, relation}) => {\r\n            if ( outward && outward.includes(vertex) )\r\n              relation !== Edge.relations.OUTOUT ? inward && inward.forEach(inward => inward !== vertex && acc.add(inward))\r\n                                                 : outward.forEach(outward => outward !== vertex && acc.add(outward))\r\n            return acc\r\n        }, new Set)]\r\n    }\r\n\r\n    addVertex(vertex, edges, ...args){\r\n        if ( !(vertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        store.get(this).get(svertices).add(vertex)\r\n        store.get(vertex).get(sgraphs).add(this)\r\n\r\n        if ( edges && edges instanceof Edge )\r\n          this.addEdge(edges)\r\n        else if ( edges && edges[Symbol.iterator] )\r\n          this.addEdges(edges)\r\n        else if ( typeof edges == \"function\" ) {\r\n            const edge = this.addEdge(Reflect.construct(edges, [[vertex], ...args]))\r\n            return [vertex, edge]\r\n        }\r\n\r\n\r\n        return vertex\r\n    }\r\n\r\n    addVertices(vertices, edges, ...args){\r\n        const added = [...vertices].map(vertex => this.addVertex(vertex))\r\n\r\n        if ( edges && edges instanceof Edge )\r\n          this.addEdge(edges)\r\n        else if ( edges && edges[Symbol.iterator] )\r\n          this.addEdges(edges)\r\n        else if ( typeof edges == \"function\" ) {\r\n            const edge = Reflect.construct(edges, [added, ...args])\r\n            return [added, this.addEdge(edge)]\r\n        }\r\n\r\n        return added\r\n    }\r\n\r\n    arcFrom(a, b){\r\n        if ( !(a instanceof Vertex) || !(b instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        return this.addEdge(new Edge([a, b], \">\"))\r\n    }\r\n\r\n    arcTo(a, b){\r\n        if ( !(a instanceof Vertex) || !(b instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        return this.addEdge(new Edge([a, b], \"<\"))\r\n    }\r\n\r\n    get bft(){ return this.breadthFirstTree }\r\n    breadthFirstTree(vertex){ return new Traversal(this).breadthFirstTree(vertex) }\r\n\r\n    degree(vertex){\r\n        if ( !(vertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        if ( !store.get(this).get(svertices).has(vertex) )\r\n          throw new ReferenceError(ENOTINSET)\r\n\r\n        return this.connections.reduce((acc, {vertices, type}) => {\r\n            if ( vertices.includes(vertex) )\r\n              acc += type === Edge.types.LOOP ? 2 : 1\r\n            return acc\r\n        }, 0)\r\n    }\r\n\r\n    get dft(){ return this.depthFirstTree }\r\n    depthFirstTree(vertex){ return new Traversal(this).depthFirstTree(vertex) }\r\n\r\n    extravertArcWith(a, b){\r\n        if ( !(a instanceof Vertex) || !(b instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        return this.addEdge(new Edge([a, b], \"><\"))\r\n    }\r\n\r\n    hyperEdgeWith(vertices){\r\n        vertices.forEach(vertex => {\r\n            if ( !(vertex instanceof Vertex) )\r\n            throw new TypeError(ENOTVERTEX)\r\n        })\r\n\r\n        return this.addEdge(new Edge([...vertices], \"@\"))\r\n    }\r\n\r\n    indegree(vertex){\r\n        if ( !(vertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        if ( !store.get(this).get(svertices).has(vertex) )\r\n          throw new ReferenceError(ENOTINSET)\r\n\r\n        return this.arcs.reduce((acc, {inward}) => {\r\n            if ( inward.includes(vertex) )\r\n              acc += 1\r\n            return acc\r\n        }, 0)\r\n    }\r\n\r\n    introvertArcWith(vertices){\r\n        if ( !(a instanceof Vertex) || !(b instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        return this.addEdge(new Edge([a, b], \"<>\"))\r\n    }\r\n\r\n    lineWith(a, b){\r\n        if ( !(a instanceof Vertex) || !(b instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        return this.addEdge(new Edge([a, b]))\r\n    }\r\n\r\n    loop(vertex, rel=\"LINE\"){\r\n        if ( !(vertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n        if ( !Edge.relations.hasOwnProperty(rel) )\r\n          throw new ReferenceError(EUNKNWNREL)\r\n\r\n        return this.addEdge(new Edge([vertex], rel))\r\n    }\r\n\r\n    outdegree(vertex){\r\n        if ( !(vertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        if ( !store.get(this).get(svertices).has(vertex) )\r\n          throw new ReferenceError(ENOTINSET)\r\n\r\n        return this.arcs.reduce((acc, {outward}) => {\r\n            if ( outward.includes(vertex) )\r\n              acc += 1\r\n            return acc\r\n        }, 0)\r\n    }\r\n\r\n    removeEdge(edge){\r\n        if ( !(edge instanceof Edge) )\r\n          throw new TypeError(ENOTEDGE)\r\n\r\n        store.get(this).get(sedges).delete(edge)\r\n        store.get(edge).delete(sgraph)\r\n\r\n        return edge\r\n    }\r\n\r\n    removeEdges(edges){ void [...edges].forEach(edge => this.removeEdge(edge)) }\r\n\r\n    removeVertex(vertex, edges){\r\n        if ( !(vertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        store.get(this).get(svertices).delete(vertex)\r\n        store.get(vertex).get(sgraphs).delete(this)\r\n\r\n        edges = edges && edges[Symbol.iterator] ? edges\r\n              : edges ? [edges] : []\r\n        void [...edges].forEach(edge => this.removeEdge(edge))\r\n\r\n        void [...this.edges].forEach(edge => {\r\n            if ( !edge.vertices.includes(vertex) )\r\n              return\r\n\r\n            //if ( edge.type != Edge.types.HYPERARC || edge.vertices.length == 1)\r\n            if ( edge.vertices.length > 1 && (edge.type == Edge.types.HYPERARC || this.allows(Edge.types.LOOP))  )\r\n              edge.removeVertex(vertex)\r\n            else\r\n              this.removeEdge(edge)\r\n        })\r\n\r\n        return vertex\r\n    }\r\n\r\n    removeVertices(vertices, edges){\r\n        void [...vertices].forEach(vertex => this.removeVertex(vertex))\r\n\r\n        if ( edges && !edges[Symbol.iterator] )\r\n          this.removeEdge(edges)\r\n        else if ( edges && edges[Symbol.iterator] )\r\n          this.removeEdges(edges)\r\n    }\r\n}\r\n","\"use strict\"\r\n\r\nimport { EINVALIDCONS, ENOTGRAPH, ENOTVERTEX } from \"errors\"\r\nimport Graph from \"graph/Graph\"\r\nimport store from \"store\"\r\nimport typeOf from \"utils/toType\"\r\nimport Vertex from \"graph/Vertex\"\r\n\r\nexport const sgraph = new Object(Symbol())\r\nexport const sroot = new Object(Symbol())\r\nexport const straversal = new Object(Symbol())\r\n\r\nexport default class BreadthFirstTree {\r\n    static from({ graph, rootVertex, traversal }){\r\n        if ( !(graph instanceof Graph) )\r\n          throw new TypeError(ENOTGRAPH)\r\n        if ( !(rootVertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        const bft = Object.create({})\r\n        Object.setPrototypeOf(bft, BreadthFirstTree.prototype)\r\n        store.set(bft, new WeakMap)\r\n        store.get(bft).set(sgraph, graph)\r\n        store.get(bft).set(sroot, rootVertex)\r\n        store.get(bft).set(straversal, traversal)\r\n\r\n        return bft\r\n    }\r\n\r\n    constructor(){ throw new Error(EINVALIDCONS) }\r\n\r\n    get root(){ return store.get(this).get(sroot) }\r\n\r\n    hasPathTo(vertex){\r\n        if ( !(vertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        return store.get(this).get(straversal).has(vertex)\r\n    }\r\n\r\n    pathTo(vertex){\r\n        if ( !(vertex instanceof Vertex) )\r\n          throw new TypeError(ENOTVERTEX)\r\n\r\n        const traversal = store.get(this).get(straversal)\r\n        if ( !traversal.has(vertex) ) return null\r\n\r\n        const path = [vertex]\r\n        let parent = vertex\r\n        while ( parent = traversal.get(parent) )\r\n          path.unshift(parent)\r\n\r\n        return path\r\n    }\r\n}\r\n","\"use strict\"\r\n\r\nimport Graph from \"graph/Graph\"\r\n\r\nexport default class HyperGraph extends Graph {\r\n    constructor(){\r\n        super({ allows:7 })\r\n    }\r\n}\r\n","\"use strict\"\r\n\r\nexport { bound, final, frozen } from \"decorators\"\r\nexport cancelAnimationFrames from \"utils/cancelAnimationFrames\"\r\nexport Cookie, { Sync as CookieSync } from \"cookies/Cookie\"\r\nexport CSSConditionalRule from \"css/CSSConditionalRule\"\r\nexport CSSHook from \"css/CSSHook\"\r\nexport CSSMediaRule from \"css/CSSMediaRule\"\r\nexport CSSRule, { TextUpdate as CSSRuleTextUpdate, SelectorUpdate as CSSRuleSelectorUpdate, Reset as CSSRuleReset } from \"css/CSSRule\"\r\nexport domready from \"utils/domready\"\r\nexport dummy from \"utils/dummy\"\r\nexport Event from \"events/Event\"\r\nexport EventDispatcher from \"events/EventDispatcher\"\r\nexport EventTarget from \"events/EventTarget\"\r\nexport isNative from \"utils/isNative\"\r\nexport isSameDomain from \"utils/isSameDomain\"\r\nexport Model from \"models/Model\"\r\nexport Node from \"nodes/Node\"\r\nexport ReadyStateFul, { ReadyStateChange } from \"utils/ReadyStateFul\"\r\nexport requestAnimationFrames from \"utils/requestAnimationFrames\"\r\nexport Route from \"routing/Route\"\r\nexport RouteDispatcher from \"routing/RouteDispatcher\"\r\nexport Router from \"routing/Router\"\r\nexport Serializer from \"serializers/Serializer\"\r\nexport singleton from \"utils/singleton\"\r\nexport Stylesheet from \"css/Stylesheet\"\r\nexport store from \"store\"\r\nexport trait from \"utils/trait\"\r\nexport toType from \"utils/toType\"\r\nexport View, { expression } from \"views/View\"\r\nexport ZParser from \"views/ZParser\"\r\n\r\n// graph\r\nexport BreadthFirstTree from \"graph/BreadthFirstTree\"\r\nexport DepthFirstTree from \"graph/DepthFirstTree\"\r\nexport Edge from \"graph/Edge\"\r\nexport Graph from \"graph/Graph\"\r\nexport HyperGraph from \"graph/HyperGraph\"\r\nexport Traversal from \"graph/Traversal\"\r\nexport Vertex from \"graph/Vertex\"\r\n\r\nexport default `${process.env.APPNAME}@${process.env.APPVERSION}`\r\n"],"sourceRoot":""}